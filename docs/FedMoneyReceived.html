<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Fiscal Futures - 1&nbsp; Federal COVID Money Received</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./LocalTransfers.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Federal COVID Money Received</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Fiscal Futures</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Background Info</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FedMoneyReceived.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Federal COVID Money Received</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LocalTransfers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Local Transfers</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Debt.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Debt Service Discussion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Pensions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Pensions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Healthcare.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">State Employee Healthcare Discussion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FederalRevenue.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Federal Revenue</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Medicaid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Medicaid</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FiscalGap.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Yearly Fiscal Gap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Everything.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">All Code together</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#covid-money-tracker-data" id="toc-covid-money-tracker-data" class="nav-link active" data-scroll-target="#covid-money-tracker-data"><span class="toc-section-number">1.1</span>  COVID Money Tracker Data</a></li>
  <li><a href="#expenditures-graphs" id="toc-expenditures-graphs" class="nav-link" data-scroll-target="#expenditures-graphs"><span class="toc-section-number">1.2</span>  Expenditures Graphs</a>
  <ul class="collapse">
  <li><a href="#state-cure-expenditures-with-fy2023-and-beyond-allocations" id="toc-state-cure-expenditures-with-fy2023-and-beyond-allocations" class="nav-link" data-scroll-target="#state-cure-expenditures-with-fy2023-and-beyond-allocations"><span class="toc-section-number">1.2.1</span>  State CURE Expenditures with FY2023 and beyond allocations</a></li>
  </ul></li>
  <li><a href="#other-revenue-graphs" id="toc-other-revenue-graphs" class="nav-link" data-scroll-target="#other-revenue-graphs"><span class="toc-section-number">1.3</span>  Other Revenue Graphs</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Federal COVID Money Received</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<p>Dropping revenue source “Federal Stimulus Package” from the IOC revenue data is one way to start estimating how revenue will look after the COVID relief ends. The graphs below show Illinois revenue with and without Federal Stimulus Package revenue. It is important to note that only the $8.127 ARPA State CURE and $3.519 CARES CRF/State CURE revenue were labeled as “Federal Stimulus Package” in the IOC revenue data. There was still an additional $12 billion dollars in other federal revenue that went to the state in FY22 compared to FY19. When trying to understand the states finances and the yearly fiscal gap, we also need to understand when and where the funds were considered revenue in the IOC data and consider the fiscal year that the funds were spent. Finally, allocations or expenditures may be grouped and labeled differently by the State compared to the Fiscal Futures project categorization. Some items that the federal relief are spent on are not included in Fiscal Gap calculations (e.g.&nbsp;the Unemployment Insurance Trust Fund repayments). The biggest challenge when determining the Fiscal Gap for Illinois centers around the timing of revenue and expenditures occurring in different fiscal years during the COVID response.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"rev_temp.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>fedrev<span class="ot">&lt;-</span> rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"58"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"59"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"57"</span>) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Revenue =</span> <span class="fu">sum</span>(receipts))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source_name_AWM <span class="sc">==</span> <span class="st">"FEDERAL STIMULUS PACKAGE"</span> <span class="sc">&amp;</span> fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name) <span class="sc">%&gt;%</span> </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>receipts) <span class="sc">%&gt;%</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> fy, <span class="at">values_from =</span> receipts)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts)) <span class="sc">+</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Federal Revenue"</span>, </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Millions of Dollars"</span>, <span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">legend.title =</span> <span class="fu">element_blank</span>()  )<span class="sc">+</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">45000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source_name_AWM <span class="sc">!=</span> <span class="st">"FEDERAL STIMULUS PACKAGE"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts)) <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Federal EXCEPT Federal Stimulus Package"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Millions of Dollars"</span>, <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note: Dropping Federal Stimulus Package revenue only removes the $3.5 billion from FY20, </span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="st">       $0.3 billion from FY21, and $8.5 billion from FY22. Also drops Great Recession Aid in 2009.</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="st">       There is still over $12 billion more in Federal Revenue compared to FY19."</span>) <span class="sc">+</span> </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">legend.title =</span> <span class="fu">element_blank</span>()  ) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">45000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["fy"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Revenue"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2019","2":"19473281956"},{"1":"2020","2":"25422362326"},{"1":"2021","2":"29303090912"},{"1":"2022","2":"40729291003"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["fy"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["receipts"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020","2":"3518.9454"},{"1":"2021","2":"228.4144"},{"1":"2022","2":"8855.7494"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["fund_name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["2022"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["2021"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["2020"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["2019"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"STATE CURE","2":"8.484660e+03","3":"2.284144e+02","4":"NA","5":"NA"},{"1":"HEALTHCARE PROVIDER RELIEF","2":"8.449580e+03","3":"7.551466e+03","4":"6.006898e+03","5":"4.033401e+03"},{"1":"GENERAL REVENUE","2":"4.444664e+03","3":"4.323305e+03","4":"3.529274e+03","5":"3.530575e+03"},{"1":"DISASTER RESPONSE AND RECOVERY","2":"2.671906e+02","3":"2.756378e+02","4":"3.519919e+03","5":"NA"},{"1":"SBE FEDERAL DEPT OF EDUCATION","2":"3.363613e+03","3":"2.259235e+03","4":"1.484362e+03","5":"1.455587e+03"},{"1":"HOSPITAL PROVIDER","2":"2.812069e+03","3":"2.351735e+03","4":"2.040466e+03","5":"1.957226e+03"},{"1":"COUNTY PROVIDER TRUST","2":"2.132628e+03","3":"1.985901e+03","4":"1.363670e+03","5":"1.274989e+03"},{"1":"ROAD","2":"1.690971e+03","3":"1.811595e+03","4":"1.648519e+03","5":"1.262488e+03"},{"1":"EMPLOYMENT & TRAINING","2":"1.280686e+03","3":"4.119545e+02","4":"3.561481e+02","5":"2.631350e+02"},{"1":"SBE FEDERAL DEPT OF AGRI","2":"1.110627e+03","3":"8.074842e+02","4":"7.508596e+02","5":"7.818870e+02"},{"1":"DRUG REBATE","2":"8.901367e+02","3":"9.137380e+02","4":"5.191765e+02","5":"6.032450e+02"},{"1":"DCEO PROJECTS","2":"1.481707e+01","3":"5.662758e+02","4":"NA","5":"NA"},{"1":"PUBLIC HEALTH SERVICES","2":"5.379595e+02","3":"3.305861e+02","4":"1.573925e+02","5":"1.417503e+02"},{"1":"FEDERAL/STATE/LOCAL AIRPORT","2":"9.543278e+01","3":"5.095228e+02","4":"9.547368e+01","5":"3.924228e+01"},{"1":"DHS SPECIAL PURPOSE TRUST","2":"1.309660e+02","3":"4.993561e+02","4":"3.376481e+02","5":"3.214861e+02"},{"1":"FEDERAL AID DISASTER","2":"4.562795e+02","3":"4.755982e+02","4":"1.630045e+01","5":"4.263000e+00"},{"1":"DCFS CHILDREN'S SERVICES","2":"3.764317e+02","3":"3.924173e+02","4":"3.679366e+02","5":"3.528222e+02"},{"1":"LOCAL CURE","2":"3.710897e+02","3":"NA","4":"NA","5":"NA"},{"1":"LOW INC HOME ENERGY BLOCK GRNT","2":"3.427243e+02","3":"2.551679e+02","4":"1.599768e+02","5":"1.860652e+02"},{"1":"FEDERAL TITLE III SS & EMPLOY","2":"3.154626e+02","3":"2.906549e+02","4":"1.860070e+02","5":"1.800909e+02"},{"1":"HOME SERVICES MEDICAID TRUST","2":"2.340000e+02","3":"2.340000e+02","4":"2.340000e+02","5":"2.329275e+02"},{"1":"LONG TERM CARE PROVIDER","2":"1.738766e+02","3":"2.139360e+02","4":"1.728405e+02","5":"1.724117e+02"},{"1":"PUBLIC AID RECOVERIES TRUST","2":"6.648464e+01","3":"8.534392e+01","4":"8.041959e+01","5":"1.876124e+02"},{"1":"USDA WOMEN, INFANTS & CHILDREN","2":"1.530155e+02","3":"1.472210e+02","4":"1.529769e+02","5":"1.698133e+02"},{"1":"SPECIAL ED MEDICAID MATCHING","2":"1.463712e+02","3":"1.524548e+02","4":"1.570119e+02","5":"1.628913e+02"},{"1":"FEDERAL WORKFORCE TRAINING","2":"1.540169e+02","3":"1.489247e+02","4":"1.508012e+02","5":"1.574161e+02"},{"1":"UNIVERSITY OF IL HOSPITAL SERV","2":"1.503124e+02","3":"1.277193e+02","4":"1.177167e+02","5":"1.017576e+02"},{"1":"VOCATIONAL REHABILITATION","2":"1.463957e+02","3":"1.286630e+02","4":"1.345684e+02","5":"1.105706e+02"},{"1":"TOBACCO SETTLEMENT RECOVERY","2":"1.212745e+02","3":"1.446353e+02","4":"9.644635e+01","5":"4.367045e+01"},{"1":"WATER REVOLVING","2":"1.283167e+02","3":"1.003093e+02","4":"1.134390e+02","5":"1.444371e+02"},{"1":"CRIMINAL JUSTICE TRUST","2":"9.327505e+01","3":"8.436976e+01","4":"1.110677e+02","5":"8.440864e+01"},{"1":"SOCIAL SERVS BLOCK GRANT","2":"5.837217e+01","3":"5.015500e+01","4":"5.123370e+01","5":"1.040822e+02"},{"1":"INCOME TAX REFUND","2":"9.027197e+01","3":"1.008806e+02","4":"8.354985e+01","5":"8.949945e+01"},{"1":"CHILD SUPPORT ADMINISTRATIVE","2":"9.250858e+01","3":"7.457589e+01","4":"9.369603e+01","5":"9.910374e+01"},{"1":"HOMELAND SEC EMERG PREPAR TRST","2":"8.504295e+01","3":"9.583205e+01","4":"7.267387e+01","5":"7.969209e+01"},{"1":"SERVICES FOR OLDER AMERICANS","2":"7.818942e+01","3":"9.104796e+01","4":"5.704391e+01","5":"6.535802e+01"},{"1":"PREVENT & TREAT ALCOHOL & SUB","2":"8.179126e+01","3":"6.016400e+01","4":"6.589295e+01","5":"4.618100e+01"},{"1":"COMMUNITY DD SRVCS MEDICAID TR","2":"6.000000e+01","3":"6.000000e+01","4":"6.000000e+01","5":"7.758210e+01"},{"1":"DEPT OF CORRECTIONS REIMBURSEM","2":"7.350688e+01","3":"2.783978e+00","4":"9.623251e+00","5":"2.232033e+01"},{"1":"OLD AGE SURVIVORS INSURANCE","2":"6.444638e+01","3":"6.734965e+01","4":"6.520748e+01","5":"7.169960e+01"},{"1":"EARLY INTERVENTION SERVICE REV","2":"6.168115e+01","3":"4.784946e+01","4":"6.506660e+01","5":"6.454425e+01"},{"1":"COMMUNITY SERVICES BLOCK GRANT","2":"5.908063e+01","3":"4.752850e+01","4":"3.532767e+01","5":"3.147936e+01"},{"1":"FEDERAL MASS TRANSIT TRUST","2":"4.665432e+01","3":"5.737226e+01","4":"2.711503e+01","5":"4.040417e+01"},{"1":"CDB CONTRIBUTORY TRUST","2":"7.427521e+00","3":"5.389498e+01","4":"6.656659e+00","5":"1.041053e+01"},{"1":"ALCOHOLISM & SUBSTANCE ABUSE","2":"5.277367e+01","3":"3.828832e+01","4":"3.156807e+01","5":"2.222302e+01"},{"1":"COM DEV/SMALL CITY BLK GRANT","2":"1.898116e+01","3":"3.121937e+01","4":"3.346773e+01","5":"4.978514e+01"},{"1":"COMMUNITY MENTAL HEALTH MEDICA","2":"3.341093e+01","3":"3.575192e+01","4":"4.900368e+01","5":"4.382049e+01"},{"1":"GENERAL OBLIGATION BR&I","2":"4.853552e+01","3":"4.361762e+01","4":"3.624299e+01","5":"4.749298e+01"},{"1":"FEDERAL STUDENT LOAN","2":"4.197184e+01","3":"2.281247e+01","4":"3.128818e+01","5":"4.792663e+01"},{"1":"DHS FEDERAL PROJECTS","2":"4.342459e+01","3":"2.624298e+01","4":"1.576523e+01","5":"1.692135e+01"},{"1":"U S ENVIRONMENTAL PROTECTION","2":"3.726231e+01","3":"3.743410e+01","4":"3.069133e+01","5":"3.077558e+01"},{"1":"WILDLIFE & FISH","2":"3.522196e+01","3":"2.393441e+01","4":"1.457165e+01","5":"1.709909e+01"},{"1":"MEDICAL SPECIAL PURPOSE TRUST","2":"3.096792e+00","3":"9.030507e+00","4":"5.381781e+00","5":"3.507319e+01"},{"1":"COMMUNITY MH SERVS BLOCK GRNT","2":"3.463522e+01","3":"2.383254e+01","4":"2.283086e+01","5":"2.309095e+01"},{"1":"HELP ILLINOIS VOTE","2":"2.143228e+00","3":"5.897067e+00","4":"2.870674e+01","5":"6.616150e-01"},{"1":"FEDERAL SUPPORT AGREEMENT REV","2":"2.492307e+01","3":"2.557881e+01","4":"2.530320e+01","5":"2.714599e+01"},{"1":"CARE PROV FOR PERSONS WITH DD","2":"1.423075e+01","3":"2.182239e+01","4":"2.013559e+01","5":"2.384702e+01"},{"1":"ICCB ADULT EDUCATION","2":"2.206933e+01","3":"2.198493e+01","4":"1.857881e+01","5":"2.006104e+01"},{"1":"MATERNAL & CHILD HLTH SERV BLK","2":"2.184304e+01","3":"1.914365e+01","4":"1.609753e+01","5":"1.519503e+01"},{"1":"LONG TERM CARE MONITOR/RECEIVE","2":"1.835913e+01","3":"7.500000e+00","4":"2.079215e+01","5":"1.050000e+01"},{"1":"FEDERAL HIGH SPEED RAIL TRUST","2":"5.043673e-01","3":"1.073629e+00","4":"1.241269e+01","5":"2.054136e+01"},{"1":"BHE FEDERAL GRANTS","2":"1.509681e+01","3":"1.946308e+01","4":"NA","5":"7.426720e-01"},{"1":"ELECTRONIC HEALTH RECORD","2":"3.895601e+00","3":"7.820002e+00","4":"7.746524e+00","5":"1.854912e+01"},{"1":"MEDICAL INTERAGENCY PROGRAM","2":"6.131932e+00","3":"1.215903e+01","4":"1.308295e+01","5":"1.762755e+01"},{"1":"HEALTH INSURANCE RESERVE","2":"4.346896e+00","3":"1.753361e+01","4":"8.896576e+00","5":"5.787524e+00"},{"1":"SBE FEDERAL AGENCY SERVICES","2":"1.734833e+01","3":"1.131337e+01","4":"6.678488e+00","5":"3.572641e+00"},{"1":"DHS COMMUNITY SERVICES","2":"1.062520e-01","3":"6.236708e+00","4":"4.991247e+00","5":"1.688792e+01"},{"1":"QUINCY VETERAN HOME","2":"1.492537e+01","3":"1.452755e+01","4":"1.630200e+01","5":"1.537560e+01"},{"1":"ENERGY ADMINISTRATION","2":"1.552581e+01","3":"1.176874e+01","4":"1.151240e+01","5":"1.199705e+01"},{"1":"IL COMM COLL BRD CONTRCT & GRT","2":"1.501168e+01","3":"1.106145e+01","4":"3.152500e-02","5":"NA"},{"1":"MANTENO VETERANS HOME","2":"9.497217e+00","3":"1.383643e+01","4":"1.297500e+01","5":"1.489422e+01"},{"1":"ABANDONED MINED LANDS RECLAM","2":"1.330300e+01","3":"6.936658e+00","4":"7.935826e+00","5":"1.279382e+01"},{"1":"HEALTH&HUMAN SERV MEDICAID TR","2":"3.476146e+00","3":"1.011597e+01","4":"1.220393e+01","5":"9.076409e+00"},{"1":"DNR FEDERAL PROJECTS","2":"1.202528e+01","3":"8.367400e+00","4":"5.080822e+00","5":"7.037024e+00"},{"1":"IL STATE POLICE FEDERAL  PROJS","2":"1.167433e+01","3":"1.177735e+01","4":"1.132542e+01","5":"9.144623e+00"},{"1":"IL NAT GUARD ST ACTIVE DUTY","2":"5.148188e+00","3":"1.956636e+00","4":"1.009991e+01","5":"2.028697e+00"},{"1":"SBE SPECIAL PURPOSE TRUST","2":"9.857211e+00","3":"3.209277e+00","4":"7.211767e+00","5":"4.119301e+00"},{"1":"LASALLE VETERANS HOME","2":"5.121559e+00","3":"7.548841e+00","4":"8.628974e+00","5":"8.975916e+00"},{"1":"PUBLIC HEALTH SPEC STATE PROJ","2":"8.945259e+00","3":"8.141258e+00","4":"6.400647e+00","5":"7.313547e+00"},{"1":"TRAUMA CENTER","2":"9.261460e-01","3":"3.434085e+00","4":"4.251276e+00","5":"8.536415e+00"},{"1":"WHOLESOME MEAT","2":"8.133856e+00","3":"6.017235e+00","4":"7.578749e+00","5":"7.622375e+00"},{"1":"COMMERCE & COMM AFFAIRS ASST","2":"7.628181e+00","3":"7.469707e+00","4":"5.194053e+00","5":"6.249061e+00"},{"1":"LIBRARY SERVICES","2":"7.568489e+00","3":"5.881004e+00","4":"4.824435e+00","5":"5.276363e+00"},{"1":"DHS TECHNOLOGY INITIATIVE","2":"7.416110e+00","3":"7.310237e+00","4":"2.010528e+00","5":"6.783289e+00"},{"1":"IL NATNL GUARD ARMORY CONSTR","2":"6.872254e+00","3":"5.157014e+00","4":"5.642268e+00","5":"NA"},{"1":"MENTAL HEALTH","2":"6.753735e+00","3":"6.293083e+00","4":"6.828383e+00","5":"6.432487e+00"},{"1":"AML RECLAMATION SET ASIDE","2":"2.900000e+00","3":"3.500000e+00","4":"5.600000e+00","5":"5.700000e+00"},{"1":"NUCLEAR CIVIL PROTECTION PLAN","2":"1.615282e+00","3":"1.321251e+00","4":"4.668317e+00","5":"9.285069e-01"},{"1":"FEDERAL SURFACE MINING CONTROL","2":"3.283413e+00","3":"3.612215e+00","4":"2.911785e+00","5":"3.822728e+00"},{"1":"FEDERAL ENERGY","2":"2.108786e+00","3":"2.782162e+00","4":"3.716951e+00","5":"8.733192e-01"},{"1":"ANNA VETERANS HOME","2":"1.786233e+00","3":"2.571793e+00","4":"3.571717e+00","5":"2.540727e+00"},{"1":"COUNCIL ON DEV DISABILITIES","2":"2.796549e+00","3":"3.060453e+00","4":"3.545197e+00","5":"3.118890e+00"},{"1":"IL HISTORIC SITES","2":"3.450024e+00","3":"5.713417e-01","4":"6.845503e-01","5":"NA"},{"1":"COURT OF CLAIMS FEDERAL GRANT","2":"2.988258e+00","3":"2.011730e-01","4":"3.423580e+00","5":"1.113132e+00"},{"1":"PREVENTIVE HEALTH&HLTH SERV BL","2":"1.981598e+00","3":"3.171144e+00","4":"2.442335e+00","5":"2.596579e+00"},{"1":"GAINING EARLY AWARENESS & READ","2":"NA","3":"3.087705e+00","4":"NA","5":"NA"},{"1":"STATE BOATING ACT","2":"2.974517e+00","3":"2.031066e+00","4":"1.404840e+00","5":"1.923712e+00"},{"1":"DCFS FEDERAL PROJECTS","2":"2.804848e+00","3":"2.817028e+00","4":"2.554932e+00","5":"2.085719e+00"},{"1":"FEDERAL STUDENT INCENTIVE TR","2":"2.675467e+00","3":"2.302349e+00","4":"2.382383e+00","5":"2.576125e+00"},{"1":"TCHR HEALTH INSURANCE SECURITY","2":"4.358973e-01","3":"2.559620e+00","4":"1.010264e+00","5":"1.198533e+00"},{"1":"SPECIAL PROJECTS DIVISION","2":"2.194674e+00","3":"2.316556e+00","4":"2.286381e+00","5":"2.265016e+00"},{"1":"LAND & WATER RECREATION","2":"2.033250e+00","3":"1.852192e+00","4":"2.281000e+00","5":"6.500000e-01"},{"1":"SENIOR HEALTH INSURANCE PROG","2":"2.097265e+00","3":"1.408762e+00","4":"1.553698e+00","5":"1.034188e+00"},{"1":"PARK & CONSERVATION","2":"2.075703e+00","3":"1.214117e+00","4":"1.945746e+00","5":"5.839354e-01"},{"1":"FEDERAL INDUSTRIAL SERVICES","2":"1.947701e+00","3":"2.068811e+00","4":"1.404604e+00","5":"1.067725e+00"},{"1":"PUBLIC UTILITY","2":"1.638458e+00","3":"1.987576e+00","4":"1.475842e+00","5":"1.918918e+00"},{"1":"IL FORESTRY DEVELOPMENT","2":"8.636674e-01","3":"1.934811e+00","4":"2.371398e-01","5":"1.172955e+00"},{"1":"IL ARTS COUNCIL FEDERAL GRANT","2":"1.872600e+00","3":"9.109000e-01","4":"1.388800e+00","5":"8.555000e-01"},{"1":"AGRICULTURE FEDERAL PROJECTS","2":"1.587334e+00","3":"9.877793e-01","4":"1.491239e+00","5":"1.465294e+00"},{"1":"LEAD POISONING,SCREENING","2":"1.059640e+00","3":"1.170151e+00","4":"1.058351e+00","5":"1.567769e+00"},{"1":"GI EDUCATION","2":"1.402910e+00","3":"1.163394e+00","4":"1.318312e+00","5":"9.819456e-01"},{"1":"JUVENILE JUSTICE TRUST","2":"1.367464e+00","3":"1.134833e+00","4":"1.202858e+00","5":"1.127240e+00"},{"1":"TECHNOLOGY MGMNT REVOLVING","2":"1.307556e+00","3":"1.363221e+00","4":"3.695252e-01","5":"3.897368e-01"},{"1":"DEPT OF LABOR FEDERAL PROJECTS","2":"1.121629e+00","3":"1.303031e+00","4":"1.013225e+00","5":"7.840037e-01"},{"1":"DHS RECOVERIES TRUST","2":"5.031369e-01","3":"8.103377e-01","4":"9.627039e-01","5":"1.158618e+00"},{"1":"FIRE PREVENTION DIVISION","2":"4.805497e-01","3":"8.710490e-01","4":"4.340412e-01","5":"1.080887e+00"},{"1":"SUPREME COURT FEDERAL PROJECTS","2":"1.064532e+00","3":"8.191903e-01","4":"7.835226e-01","5":"7.508674e-01"},{"1":"PUBLIC HEALTH FEDERAL PROJECTS","2":"3.544290e-01","3":"8.814200e-01","4":"9.085912e-01","5":"1.416944e-01"},{"1":"FEDERAL TITLE IV FIRE PROT","2":"5.532610e-01","3":"8.942047e-01","4":"4.241300e-02","5":"NA"},{"1":"ATTORNEY GENERAL FEDERAL GRANT","2":"8.533546e-01","3":"6.760131e-01","4":"6.954154e-01","5":"8.427658e-01"},{"1":"FEDERAL CIVIL PREPARED ADMIN","2":"6.537159e-01","3":"4.620734e-01","4":"7.878835e-01","5":"6.287031e-01"},{"1":"FEDERAL ASSET FORFEITURE","2":"3.496789e-01","3":"5.290560e-01","4":"5.582714e-01","5":"7.626138e-01"},{"1":"BROWNFIELDS REDEVELOPMENT","2":"2.044410e-01","3":"1.332400e-02","4":"2.507320e-01","5":"6.976760e-01"},{"1":"AGRICULTURE PESTICIDE CONTROL","2":"6.484658e-01","3":"5.825550e-01","4":"1.546611e-01","5":"6.823739e-01"},{"1":"NATIONAL FLOOD INSURANCE PROG","2":"3.783690e-01","3":"3.994860e-01","4":"6.480059e-01","5":"3.421198e-01"},{"1":"INDOOR RADON MITIGATION","2":"5.446384e-01","3":"3.635895e-01","4":"6.017543e-01","5":"2.977932e-01"},{"1":"DEPT OF INSURANCE FED TRUST","2":"1.531338e-01","3":"NA","4":"4.304181e-01","5":"5.896507e-01"},{"1":"MONEY FOLLOWS PRSN BDGT TRNSFR","2":"NA","3":"NA","4":"5.605390e-01","5":"NA"},{"1":"MINES & MINERALS UIC","2":"5.539700e-01","3":"2.170000e-01","4":"2.160000e-01","5":"2.190000e-01"},{"1":"FACILITIES MANAGEMENT REVOLV","2":"5.467009e-01","3":"NA","4":"NA","5":"NA"},{"1":"DRAM SHOP","2":"NA","3":"NA","4":"NA","5":"5.417901e-01"},{"1":"SECRETARY OF STATE ID SECURITY","2":"1.967000e-02","3":"3.103058e-01","4":"3.874299e-01","5":"2.336325e-01"},{"1":"ICCB FEDERAL TRUST","2":"2.013583e-01","3":"3.747502e-01","4":"7.072575e-02","5":"1.173165e-01"},{"1":"UNDERGROUND RESOURCE CONSERV","2":"3.643990e-01","3":"2.109750e-01","4":"2.138090e-01","5":"NA"},{"1":"COMMUNITY COLLEGE HEALTH INSUR","2":"6.006596e-02","3":"3.225752e-01","4":"1.363346e-01","5":"1.694746e-01"},{"1":"HEALTHY SMILES","2":"2.904610e-01","3":"3.065070e-01","4":"3.158320e-01","5":"2.756740e-01"},{"1":"LAW ENF OFF TRNG BD FED PROJ","2":"2.022250e-01","3":"2.998571e-01","4":"2.035517e-01","5":"2.591584e-01"},{"1":"EPA SPEC STATE PROJ TRUST","2":"2.951640e-01","3":"2.339070e-01","4":"2.200930e-01","5":"2.103520e-01"},{"1":"IMSA SPECIAL PURPOSES TRUST","2":"1.870160e-01","3":"2.881025e-01","4":"2.333482e-01","5":"1.584728e-01"},{"1":"FOREST RESERVE","2":"2.168860e-01","3":"2.101535e-01","4":"2.230542e-01","5":"2.618524e-01"},{"1":"TENN VALLEY AUTH LOCAL TRUST","2":"2.080241e-01","3":"2.196107e-01","4":"2.415461e-01","5":"2.235726e-01"},{"1":"DEP OF LABOR FED INDIRECT COST","2":"5.442389e-02","3":"2.083825e-01","4":"NA","5":"NA"},{"1":"SECRETARY OF STATE FED PROJ","2":"5.717499e-02","3":"5.172001e-02","4":"1.159984e-01","5":"6.971307e-02"},{"1":"NATURAL AREAS ACQUISITION","2":"1.032148e-01","3":"5.645998e-02","4":"NA","5":"5.875270e-02"},{"1":"PARTNERS FOR CONSERVATION","2":"3.171201e-02","3":"6.380132e-02","4":"NA","5":"9.867258e-02"},{"1":"COURT OF CLAIMS ADMIN & GRANT","2":"8.119463e-02","3":"6.353553e-02","4":"8.731024e-02","5":"9.755130e-02"},{"1":"DEAF AND HARD OF HEARING SPECI","2":"9.450000e-02","3":"6.600000e-02","4":"5.284100e-02","5":"6.325000e-02"},{"1":"AGRICULTURAL MASTER","2":"NA","3":"NA","4":"NA","5":"9.255791e-02"},{"1":"IL WILDLIFE PRESERVATION","2":"NA","3":"NA","4":"NA","5":"7.623800e-02"},{"1":"DHS STATE PROJECTS","2":"NA","3":"7.434609e-02","4":"NA","5":"NA"},{"1":"LOC GOVT HEALTH INSURANCE RES","2":"NA","3":"6.264345e-02","4":"4.447181e-02","5":"4.419056e-02"},{"1":"BHE STATE PROJECTS","2":"NA","3":"NA","4":"5.000000e-02","5":"2.700000e-02"},{"1":"PRES LIBR & MUSEUM OPERATING","2":"4.580000e-02","3":"NA","4":"NA","5":"NA"},{"1":"STATE PARKS","2":"3.737143e-02","3":"4.363764e-02","4":"NA","5":"NA"},{"1":"RADIATION PROTECTION","2":"2.039650e-02","3":"2.616225e-02","4":"4.338500e-02","5":"2.662550e-02"},{"1":"CONSRV POLICE OPS ASSIST","2":"NA","3":"3.836300e-02","4":"NA","5":"NA"},{"1":"SECRETARY OF STATE SPEC SERV","2":"NA","3":"NA","4":"NA","5":"3.366000e-02"},{"1":"NATURAL RESOURCES RESTORATION","2":"NA","3":"NA","4":"3.332823e-02","5":"NA"},{"1":"ST APPELLATE DEFENDER FEDERAL","2":"NA","3":"NA","4":"NA","5":"3.140063e-02"},{"1":"FEDERAL AG MARKETING SERVICES","2":"3.000000e-02","3":"3.000000e-02","4":"NA","5":"NA"},{"1":"FIRE PREVENTION","2":"NA","3":"2.691913e-02","4":"NA","5":"NA"},{"1":"APPRAISAL ADMINISTRATION","2":"2.464940e-02","3":"NA","4":"NA","5":"NA"},{"1":"STATE SURPLUS PROPERTY REV","2":"NA","3":"NA","4":"1.394713e-02","5":"1.726800e-02"},{"1":"GROUP INSURANCE PREMIUM","2":"1.071330e-02","3":"6.982860e-03","4":"1.472486e-02","5":"1.084185e-02"},{"1":"MILITARY AFFAIRS TRUST","2":"1.208043e-02","3":"1.158922e-02","4":"8.099000e-05","5":"1.288963e-02"},{"1":"JUVENILE REHAB SERV MEDICAID","2":"5.067000e-03","3":"2.586000e-03","4":"5.778000e-03","5":"1.283500e-02"},{"1":"CAREER AND TECHNICAL EDUCATION","2":"NA","3":"NA","4":"NA","5":"4.500000e-03"},{"1":"SPECIAL FEDERAL GRANT PROJECT","2":"NA","3":"NA","4":"NA","5":"3.000000e-03"},{"1":"FEED CONTROL","2":"NA","3":"NA","4":"NA","5":"1.979440e-03"},{"1":"IL MATH & SCIENCE ACAD INCOME","2":"NA","3":"5.845000e-05","4":"NA","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="covid-money-tracker-data" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="covid-money-tracker-data"><span class="header-section-number">1.1</span> COVID Money Tracker Data</h2>
<p>Data was downloaded from COVIDMoneyTracker.org for the State of Illinois. Values reflect the amount committed and not all funds have been disbursed yet. It does not include aid for households or loans to businesses. Data file is named federalcoviddollars.xlsx in Github page used to create this website.</p>
<p>A little information on Sankey graphs is below:</p>
<ul>
<li>The axis is how the observations are grouped at each step. There are multiple axes.</li>
<li>Strata are the options that exist for each level. (e.g.&nbsp;Year received can be 2021 or 2022)</li>
<li>Alluvium correspond to the fixed value of each axis variable. Proportional to how the sum of however you are grouping your data.</li>
<li>Flows are the segments of the alluvia between adjacent axes.</li>
</ul>
<p>Read the charts from the top to the bottom. Most of the graphs below begin with either the year the money was committed or the name of the Law that provided the funds and then shows it flowing down to either who received the money or how it was spent.</p>
<p>The graphs below focus on when the money from each Federal Act arrived and where it was received (local governments, the State government, or directly to a state department) and the spending category that it would be considered using the Fiscal Futures categorization. The State government received $11.7 billion, state departments received $31.4 billion, and local governments received $8.9 billion between FY 2020 and FY 2022. Not all funds have been distributed by the federal government, but they have been committed on the federal level and allocated on the state level.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"federalcoviddollars.xlsx"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#select(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) %&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  filter(StFund == "Total") %&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(FY, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"FY20"</span>, <span class="st">"FY21"</span>, <span class="st">"FY22"</span>)),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">Legislation2 =</span> <span class="fu">factor</span>(Legislation2, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Other"</span>, <span class="st">"CARES"</span>, <span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Legislation1 =</span> <span class="fu">factor</span>(Legislation, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Families First"</span>, <span class="st">"CARES"</span>, <span class="st">"PPP &amp; Health Care"</span>, <span class="st">"Response &amp; Relief"</span>, <span class="st">"ARPA"</span>))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                 <span class="co">#  Expenditures = factor(Expenditures, levels = c("Community Development", "Public Health", "Medicaid", "K-12", "Federal Other", "Transit")),</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="co">#   Notes = factor(Notes, levels = c(  "CARES", "Other *","CRRSA", "ARPA")))</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis3 =</span> FY, <span class="at">axis2 =</span> <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$52 Million Federal COVID Relief to Illinois over 3 years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#switches fiscal Year and Broad Category. Not as helpful. </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(sankey, </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = `Dollars Received`, axis2 = FY, axis3 = `Broad Category`, axis1=FF_Cat2, label = "stratum")) +</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = Legislation), color = "black", reverse=FALSE) +</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  # guides(fill = FALSE) +   </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># coord_flip()+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() +</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#      geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE)+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#     theme(legend.position = "bottom")+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("$52 Million Federal COVID Relief to Illinois over 3 years")</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>,FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from=</span><span class="st">"FY"</span>, <span class="at">values_from =</span> sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"FY20","2":"15705249790"},{"1":"FY21","2":"7247259447"},{"1":"FY22","2":"29056349119"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Legislation"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"25630230465"},{"1":"CARES","2":"15705249790"},{"1":"Families First","2":"4469242245"},{"1":"PPP & Health Care","2":"2778017202"},{"1":"Response & Relief","2":"3426118654"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Broad Category"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Local Govs","2":"8885547311"},{"1":"State Departments","2":"31406366045"},{"1":"State Government","2":"11716945000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Legislation"],"name":[1],"type":["chr"],"align":["left"]},{"label":["FF_Cat2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"Excluded","3":"5930002892"},{"1":"ARPA","2":"Federal Transportation","3":"1615071673"},{"1":"ARPA","2":"Other Federal Revenue","3":"18085155900"},{"1":"CARES","2":"Excluded","3":"2955544419"},{"1":"CARES","2":"Federal Medicaid","3":"2636263219"},{"1":"CARES","2":"Other Federal Revenue","3":"10113442152"},{"1":"Families First","2":"Federal Medicaid","3":"4469242245"},{"1":"PPP & Health Care","2":"Other Federal Revenue","3":"2778017202"},{"1":"Response & Relief","2":"Federal Transportation","3":"355482847"},{"1":"Response & Relief","2":"Other Federal Revenue","3":"3070635807"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"8885547311"},{"1":"Federal Medicaid","2":"7105505464"},{"1":"Federal Transportation","2":"1970554520"},{"1":"Other Federal Revenue","2":"34047251061"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Legislation"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Broad Category"],"name":[2],"type":["chr"],"align":["left"]},{"label":["FF_Cat2"],"name":[3],"type":["chr"],"align":["left"]},{"label":["sum"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"Local Govs","3":"Excluded","4":"5930002892"},{"1":"ARPA","2":"State Departments","3":"Federal Transportation","4":"1615071673"},{"1":"ARPA","2":"State Departments","3":"Other Federal Revenue","4":"9958155900"},{"1":"ARPA","2":"State Government","3":"Other Federal Revenue","4":"8127000000"},{"1":"CARES","2":"Local Govs","3":"Excluded","4":"2955544419"},{"1":"CARES","2":"State Departments","3":"Federal Medicaid","4":"2636263219"},{"1":"CARES","2":"State Departments","3":"Other Federal Revenue","4":"6523497152"},{"1":"CARES","2":"State Government","3":"Other Federal Revenue","4":"3589945000"},{"1":"Families First","2":"State Departments","3":"Federal Medicaid","4":"4469242245"},{"1":"PPP & Health Care","2":"State Departments","3":"Other Federal Revenue","4":"2778017202"},{"1":"Response & Relief","2":"State Departments","3":"Federal Transportation","4":"355482847"},{"1":"Response & Relief","2":"State Departments","3":"Other Federal Revenue","4":"3070635807"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["FY20"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["FY21"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["FY22"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"2955544419","3":"NA","4":"5930002892"},{"1":"Federal Medicaid","2":"2636263219","3":"4469242245","4":"NA"},{"1":"Other Federal Revenue","2":"10113442152","3":"2778017202","4":"21155791707"},{"1":"Federal Transportation","2":"NA","3":"NA","4":"1970554520"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Legislation values were: ARPA = $25.6 Billion; CARES = $15.7 Billion; Families First = $4.5 Billion; PPP &amp; Health Care = $2.8 Billion; Response &amp; Relief = $3.4 Billion. Additional labels were added using Publisher to create the following image:</p>
<p><img src="images/image-105349095.png" class="img-fluid"></p>
<p>Illinois received $11.7 billion dollars from State Fiscal Recovery Funds and $31.4 billion in other federal revenue to state departments. This other federal revenue frequently came in the form of increased or new grants to many State Departments that normally receive federal funding. Local Governments within Illinois received an additional $8.9 billion for economic recovery but we do not include funds given straight to localities in our State COVID recovery fund calculations or Fiscal Gap analysis.</p>
<p>Below is a graph showing federal stimulus money that was received in each year, the federal agency/fund that it came from, and what kind of revenue it was considered (Federal Other, transportation, or medicaid) who received the money (e.g.&nbsp;the State of Illinois, Department of Human Services, Local Governments, etc.).</p>
<p>When Local Funds are included, $15.7 billion was received in FY20, $7.24 billion in FY21, and $29 billion was received in FY22 from multiple COVID response Federal Acts.</p>
<p>When excluding the money that went straight to local governments, then the state received $12.7 billion in FY20 (CARES Act), $7.2 billion in FY21, and $23 billion was committed in FY22 (ARP Act). This includes both State CURE funds that had more flexibility in how they were spent as well as the grants and that went to State Departments for specific purposes.</p>
<p><del>The graph above shows the year received, the federal government’s fund name or purpose, the department that received the funds, and the fiscal futures spending category that the purpose falls under.</del></p>
<p>Again, these graphs show the funds that were received and their intended purpose, NOT the data on how or when it was spent.</p>
<section id="without-local-government-relief" class="level4" data-number="1.1.0.1">
<h4 data-number="1.1.0.1" class="anchored" data-anchor-id="without-local-government-relief"><span class="header-section-number">1.1.0.1</span> Without Local Government Relief</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2<span class="sc">!=</span> <span class="st">"Excluded"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis4 =</span> FY, <span class="at">axis3=</span> <span class="st">`</span><span class="at">Category</span><span class="st">`</span>,  <span class="at">axis1=</span>FF_Cat2</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>          <span class="co"># , label = "stratum"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>           )) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation, <span class="at">label =</span> <span class="st">"flow"</span>), </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Without Local government relief:</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="st">          State Received $12.7 Billion in FY20, $7 Billion in FY21, and $23 Billion in FY22"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Recipient)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, Recipient)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2 <span class="sc">!=</span> <span class="st">"Excluded"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat2)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat2)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY, <span class="at">values_from =</span> TotalReceived)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TotalReceived"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"FY20","2":"15705249790"},{"1":"FY21","2":"7247259447"},{"1":"FY22","2":"29056349119"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Legislation"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TotalReceived"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"25630230465"},{"1":"CARES","2":"15705249790"},{"1":"Families First","2":"4469242245"},{"1":"PPP & Health Care","2":"2778017202"},{"1":"Response & Relief","2":"3426118654"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Recipient"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TotalReceived"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Human Services","2":"3627363000"},{"1":"ISBE","2":"8031662158"},{"1":"Local Govs-Excluded","2":"8885547311"},{"1":"Other","2":"7442989087"},{"1":"State","2":"24021296800"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TotalReceived"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"8885547311"},{"1":"Federal Other","2":"6606635965"},{"1":"K-12","2":"8031662158"},{"1":"Medicaid","2":"9883522666"},{"1":"Other","2":"4984990736"},{"1":"State CURE","2":"11645945000"},{"1":"Transit","2":"1970554520"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Recipient"],"name":[1],"type":["chr"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Families First"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["PPP & Health Care"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Response & Relief"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Human Services","2":"3462363000","3":"165000000","4":"NA","5":"NA","6":"NA"},{"1":"ISBE","2":"5054988054","3":"677964975","4":"NA","5":"NA","6":"2298709129"},{"1":"Local Govs-Excluded","2":"5930002892","3":"2955544419","4":"NA","5":"NA","6":"NA"},{"1":"Other","2":"1615071673","3":"5055990736","4":"NA","5":"NA","6":"771926678"},{"1":"State","2":"9567804846","3":"6850749660","4":"4469242245","5":"2778017202","6":"355482847"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat"],"name":[1],"type":["chr"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Families First"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["PPP & Health Care"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Response & Relief"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"5930002892","3":"2955544419","4":"NA","5":"NA","6":"NA"},{"1":"Federal Other","2":"4903167846","3":"931541441","4":"NA","5":"NA","6":"771926678"},{"1":"K-12","2":"5054988054","3":"677964975","4":"NA","5":"NA","6":"2298709129"},{"1":"State CURE","2":"8127000000","3":"3518945000","4":"NA","5":"NA","6":"NA"},{"1":"Transit","2":"1615071673","3":"NA","4":"NA","5":"NA","6":"355482847"},{"1":"Medicaid","2":"NA","3":"2636263219","4":"4469242245","5":"2778017202","6":"NA"},{"1":"Other","2":"NA","3":"4984990736","4":"NA","5":"NA","6":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat"],"name":[1],"type":["chr"],"align":["left"]},{"label":["FY20"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["FY21"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["FY22"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"2955544419","3":"NA","4":"5930002892"},{"1":"Federal Other","2":"931541441","3":"NA","4":"5675094524"},{"1":"K-12","2":"677964975","3":"NA","4":"7353697183"},{"1":"Medicaid","2":"2636263219","3":"7247259447","4":"NA"},{"1":"Other","2":"4984990736","3":"NA","4":"NA"},{"1":"State CURE","2":"3518945000","3":"NA","4":"8127000000"},{"1":"Transit","2":"NA","3":"NA","4":"1970554520"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TotalReceived"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"FY20","2":"12749705371"},{"1":"FY21","2":"7247259447"},{"1":"FY22","2":"23126346227"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Families First"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["PPP & Health Care"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Response & Relief"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"5930002892","3":"2955544419","4":"NA","5":"NA","6":"NA"},{"1":"Federal Transportation","2":"1615071673","3":"NA","4":"NA","5":"NA","6":"355482847"},{"1":"Other Federal Revenue","2":"18085155900","3":"10113442152","4":"NA","5":"2778017202","6":"3070635807"},{"1":"Federal Medicaid","2":"NA","3":"2636263219","4":"4469242245","5":"NA","6":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["FY20"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["FY21"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["FY22"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Excluded","2":"2955544419","3":"NA","4":"5930002892"},{"1":"Federal Medicaid","2":"2636263219","3":"4469242245","4":"NA"},{"1":"Other Federal Revenue","2":"10113442152","3":"2778017202","4":"21155791707"},{"1":"Federal Transportation","2":"NA","3":"NA","4":"1970554520"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="expenditures-graphs" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="expenditures-graphs"><span class="header-section-number">1.2</span> Expenditures Graphs</h2>
<p>Federal expenditures from CURE and other major funds . Uses the <code>fedCUREexpenditures.xlsx</code> file.</p>
<p>This data comes from Illinois Comptroller expenditure data, Legislative Budget Oversight Commission (LBOC) Reports, and the <a href="https://budget.illinois.gov/content/dam/soi/en/web/budget/documents/arpa/IL%20Recovery%20Plan%20Performance%20Report%202022.pdf">ARPA Annual Recovery Plan</a> detailing the State’s use of State and Local Fiscal Recovery Funds (SLFRF) which is prepared by the Governor’s Office of Management and Budget (GOMB).</p>
<p>The graphs below do not include FY23 allocations for federal funds. Dates on top are Fiscal Year received. Dates in the middle of the graph are Fiscal Year expenditures. Federal funds for COVID recovery have been received and spent in different years. This makes calculating and comparing the fiscal gap difficult.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"fedCUREexpenditures.xlsx"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> cure_exp <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FY_Spent <span class="sc">&lt;</span><span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Spent =</span> <span class="fu">factor</span>(FY_Spent, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>, <span class="st">"2023+"</span>)),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Received =</span> <span class="fu">factor</span>(FY_Received, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>)),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">FF_Cat =</span> <span class="fu">factor</span>(FF_Cat, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Econ Dev"</span>, <span class="st">"Human Services"</span>, <span class="st">"K-12"</span>, <span class="st">"Local Transfers"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Safety"</span>, <span class="st">"Lost Revenue"</span>, <span class="st">"UI Fund"</span>, <span class="st">"FY23+"</span>)))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>cure_exp<span class="sc">%&gt;%</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FY_Spent</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State_local2)<span class="sc">%&gt;%</span> </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FF_Cat</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law)<span class="sc">%&gt;%</span> </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent, FF_Cat)<span class="sc">%&gt;%</span> </span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY_Spent, <span class="at">values_from =</span> Expenditures) </span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(FY_Received)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent)<span class="sc">%&gt;%</span> </span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(FY_Spent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Expenditures"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"12180.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Received"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020","2":"3538.5"},{"1":"2022","2":"8642.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Spent"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2021","2":"2702.0"},{"1":"2022","2":"9478.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Federal Funds"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"CRF","2":"2702.0"},{"1":"Other Fed Rev","2":"4551.5"},{"1":"SLFRF","2":"4927.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["State_local2"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"State","2":"7629.0"},{"1":"State Department","2":"4551.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Econ Dev","2":"2354.0"},{"1":"Human Services","2":"1868.0"},{"1":"K-12","2":"1919.5"},{"1":"Local Transfers","2":"240.0"},{"1":"Public Health","2":"852.0"},{"1":"Medicaid","2":"705.0"},{"1":"Public Safety","2":"542.0"},{"1":"Lost Revenue","2":"1000.0"},{"1":"UI Fund","2":"2700.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Law"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"7404.0"},{"1":"CARES","2":"3538.5"},{"1":"CRRSA","2":"1238.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Law"],"name":[1],"type":["chr"],"align":["left"]},{"label":["FF_Cat"],"name":[2],"type":["fct"],"align":["left"]},{"label":["2022"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["2021"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"Econ Dev","3":"1694.0","4":"NA"},{"1":"ARPA","2":"Human Services","3":"1276.0","4":"NA"},{"1":"ARPA","2":"K-12","3":"444.0","4":"NA"},{"1":"ARPA","2":"Public Health","3":"175.0","4":"NA"},{"1":"ARPA","2":"Public Safety","3":"115.0","4":"NA"},{"1":"ARPA","2":"Lost Revenue","3":"1000.0","4":"NA"},{"1":"ARPA","2":"UI Fund","3":"2700.0","4":"NA"},{"1":"CARES","2":"Econ Dev","3":"NA","4":"660"},{"1":"CARES","2":"Human Services","3":"NA","4":"260"},{"1":"CARES","2":"Local Transfers","3":"NA","4":"240"},{"1":"CARES","2":"Public Health","3":"267.0","4":"410"},{"1":"CARES","2":"Medicaid","3":"NA","4":"705"},{"1":"CARES","2":"Public Safety","3":"NA","4":"427"},{"1":"CARES","2":"K-12","3":"569.5","4":"NA"},{"1":"CRRSA","2":"Human Services","3":"332.0","4":"NA"},{"1":"CRRSA","2":"K-12","3":"906.0","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Received"],"name":[1],"type":["fct"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CRRSA"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020","2":"NA","3":"3538.5","4":"NA"},{"1":"2022","2":"7404","3":"NA","4":"1238"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Spent"],"name":[1],"type":["fct"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CRRSA"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2021","2":"NA","3":"2702.0","4":"NA"},{"1":"2022","2":"7404","3":"836.5","4":"1238"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Year Spent, Agency received, FF Spending Category </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> FY_Spent, <span class="at">axis2 =</span> Agency, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">label.strata =</span> <span class="cn">TRUE</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"CURE &amp; ESSER $12.2 Billion Spent in FY21 &amp; FY22: </span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="st">          Year Spent, Agency that Spent it &amp; FF Spending Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch Year Spent &amp; Agency received, FF Spending Category </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent , <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">label.strata =</span> <span class="cn">TRUE</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Same as above but Switched Axis 3 and 2: </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="st">          Agency received, Year Spent, FF Spending Category "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>Fund, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Federal Fund, Year Spent, and State Fund"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> Agency, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Department that Received Revenue &amp; Purpose of Expenditure"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-4.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(cure_exp, </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = `Agency_grouped`, axis3 = `State_local2`, axis2 = Agency, axis1=FF_Cat, label = "stratum")) +</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = Law), color = "black", reverse=FALSE) +</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  coord_flip()+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() + </span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position="bottom")+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#         geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE) +</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position="bottom")+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("Same as above but y = Agency Grouped?</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#           Expenditures: Department that Received Revenue &amp; How money was used")</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, </span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="st">          Year Spent, and FF Expenditure Purpose"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-5.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, Year Spent, </span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="st">          &amp; FF Expenditure Purpose (Using FF_Cat2 variable)</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="st">          Public Health and Safety Combined"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-6.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> Fund, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, </span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="st">          State Fund Name, and FF Expenditure Category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-7.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels with labels</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures So far: Year Received, Federal Fund, Year Spent,</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="st">          &amp; How Money was Used"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-8.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_local <span class="sc">==</span> <span class="st">"State CURE"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> FY_Received, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Agency</span><span class="st">`</span>,  <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"State CURE expenditures: Year Received by State Department, Year Spent,</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="st">          and how it was spent so far"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-10-9.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="state-cure-expenditures-with-fy2023-and-beyond-allocations" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="state-cure-expenditures-with-fy2023-and-beyond-allocations"><span class="header-section-number">1.2.1</span> State CURE Expenditures with FY2023 and beyond allocations</h3>
<p>Graphs below include how money has been spent in FY21 and FY22 with unspent funds labeled as <code>FY2023+</code>.</p>
<p>This image focuses on only the funds that came through the State and Local Fiscal Recovery Fund and a couple additional funds that came through different agencies but were received by the State of Illinois. Other Federal Revenue largely indicates the ESSER funds that were received by ISBE and were spent on K-12 education.</p>
<p>$3.54 Billion received in FY20 for SFRF, $11.8 billion received in FY22. Over $10 billion has gone into the State CURE fund and another $2.4 billion was received by State Departments. Of that over $13 billion spent, $2.7 billion was spent in FY21 and $8.5 Billion was spent in FY22. The remaining $2 Billion State CURE funds have been fully allocated and some have been spent already in FY23 ($500 million transferred to General Revenue for “Lost Revenue” during COVID disruption, remaining dollars on programs and services).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"fedCUREexpenditures.xlsx"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> cure_exp <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a> <span class="co">#   filter(FY_Spent &lt;2023) %&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"CRF"</span>, <span class="st">"SLFRF"</span>, <span class="st">"Other Fed Rev"</span>)),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Spent =</span> <span class="fu">factor</span>(FY_Spent, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>, <span class="st">"2023+"</span>)),</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Received =</span> <span class="fu">factor</span>(FY_Received, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>)),</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">FF_Cat =</span> <span class="fu">factor</span>(FF_Cat, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Econ Dev"</span>, <span class="st">"Human Services"</span>, <span class="st">"K-12"</span>, <span class="st">"Local Transfers"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Safety"</span>, <span class="st">"UI Fund"</span>, <span class="st">"Lost Revenue"</span>, <span class="st">"FY23+"</span>))</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">#5 levels with labels</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>,  <span class="at">axis6 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis5=</span>State_local2, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>, <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"$15.3 Billion in Expenditures and Allocations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#5 levels with labels</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># State CURE funds only</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_local2 <span class="sc">==</span> <span class="st">"State"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"State CURE Only: ___ Billion in Expenditures and Allocations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels with labels</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"$15.3 Billion in Expenditures and Allocations"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-5.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-12-6.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FY_Spent</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FF_Cat</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Law)<span class="sc">%&gt;%</span> </span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(FY_Received)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent)<span class="sc">%&gt;%</span> </span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(FY_Spent)</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Received"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020","2":"3538.5"},{"1":"2022","2":"11842.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Federal Funds"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"CRF","2":"2702.0"},{"1":"SLFRF","2":"8127.0"},{"1":"Other Fed Rev","2":"4551.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Spent"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"2021","2":"2702.0"},{"1":"2022","2":"9478.5"},{"1":"2023+","2":"3200.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FF_Cat"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Econ Dev","2":"2354.0"},{"1":"Human Services","2":"1868.0"},{"1":"K-12","2":"1919.5"},{"1":"Local Transfers","2":"240.0"},{"1":"Public Health","2":"852.0"},{"1":"Medicaid","2":"705.0"},{"1":"Public Safety","2":"542.0"},{"1":"UI Fund","2":"2700.0"},{"1":"Lost Revenue","2":"1000.0"},{"1":"FY23+","2":"3200.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Law"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"ARPA","2":"10604.0"},{"1":"CARES","2":"3538.5"},{"1":"CRRSA","2":"1238.0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Received"],"name":[1],"type":["fct"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CRRSA"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2020","2":"NA","3":"3538.5","4":"NA"},{"1":"2022","2":"10604","3":"NA","4":"1238"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["FY_Spent"],"name":[1],"type":["fct"],"align":["left"]},{"label":["ARPA"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["CARES"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["CRRSA"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2021","2":"NA","3":"2702.0","4":"NA"},{"1":"2022","2":"7404","3":"836.5","4":"1238"},{"1":"2023+","2":"3200","3":"NA","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Sum"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"15380.5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Note: Increased Matching Grant and Medicare Continuous Coverage Requirement dollars all count as Federal Medicaid Revenue.</p>
</blockquote>
</section>
</section>
<section id="other-revenue-graphs" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="other-revenue-graphs"><span class="header-section-number">1.3</span> Other Revenue Graphs</h2>
<p>Sankeyattempt2022.csv file totals $32 billion flowing into the state. $3.5 came in FY20, $12 billion came in FY21 and $16.1 billion in FY22.</p>
<p>These observations are based more on the IOC revenue data for revenue received instead of the covidmoneytracker.org data for revenue committed.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>sankeydata2 <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>,<span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Development"</span>, <span class="st">"Transit"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>)),</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"CARES"</span>, <span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>, <span class="st">"Other *"</span>)))</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="ot">&lt;-</span> sankeydata2</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey4, </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis3 =</span> Federal, <span class="at">axis2 =</span> StateFunds, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Notes), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$32 billion recieved according to IOC Revenue data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="co">#group_by(StateFunds) %&gt;% </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds) <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Notes) <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds, Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["sum"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"32248642517"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["StateFunds"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Total_received_fy20","2":"3518945000"},{"1":"Total_received_fy21","2":"12632709463"},{"1":"Total_received_fy22","2":"16096988054"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Expenditures"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Community Development","2":"3518945000"},{"1":"Transit","2":"1620000000"},{"1":"Public Health","2":"6638000000"},{"1":"Medicaid","2":"4469242245"},{"1":"K-12","2":"7875455272"},{"1":"Federal Other","2":"8127000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Notes"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"CARES","2":"8888412218"},{"1":"CRRSA","2":"2915000000"},{"1":"ARPA","2":"13181988054"},{"1":"Other *","2":"7263242245"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["StateFunds"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Total_received_fy20","2":"Community Development","3":"3518945000"},{"1":"Total_received_fy21","2":"Transit","3":"1620000000"},{"1":"Total_received_fy21","2":"Public Health","3":"5974000000"},{"1":"Total_received_fy21","2":"Medicaid","3":"4469242245"},{"1":"Total_received_fy21","2":"K-12","3":"569467218"},{"1":"Total_received_fy22","2":"Public Health","3":"664000000"},{"1":"Total_received_fy22","2":"K-12","3":"7305988054"},{"1":"Total_received_fy22","2":"Federal Other","3":"8127000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Graph below shows same amount in federal COVID dollars but here color indicates the fund that the money was received in</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>, <span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">stfundname =</span> <span class="fu">as.factor</span>(stfundname),</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Transit"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Health"</span>,  <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>, <span class="st">"Community Development"</span>)),</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Other *"</span>, <span class="st">"CARES"</span>,<span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)))</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> Federal, <span class="at">axis2 =</span> stfundname, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>,<span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>   </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures using Federal Relief Funds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Highlights legislation, fund money went into, and its purpose.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(sankey, </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = value, axis3 = Notes, axis2 = stfundname, axis1=Expenditures, label = "stratum")) +</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = stfundname), color = "black",reverse=FALSE) +</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># coord_flip()+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() +</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># theme(legend.position="bottom") +</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("No labels")</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> Notes, <span class="at">axis2 =</span> stfundname, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>,<span class="at">reverse=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>, <span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">stfundname =</span> <span class="fu">as.factor</span>(stfundname),</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Development"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>, <span class="st">"Transit"</span>)),</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>(  <span class="st">"CARES"</span>, <span class="st">"Other *"</span>,<span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)))</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, </span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis3 =</span> Notes, <span class="at">axis2 =</span> StateFunds, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="FedMoneyReceived_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<blockquote class="blockquote">
<p>Note: CARES funds were originally received and spent in Disaster Response &amp; Recovery Fund. In FY22, unspent aid was transferred to the State CURE and then transferred again to state agencies for COVID-related expenditures. Remaining CARES funds were transferred to State CURE fund for FY22. $337 million was also transferred from the Illinois Department of Revenue into the Illinois Housing Development Authority (IHDA). (<a href="https://budget.illinois.gov/content/dam/soi/en/web/budget/documents/lboc/lboc-report-june-2021-final.pdf">LBOC June 2021 Report</a>)</p>
</blockquote>
<blockquote class="blockquote">
<p>Revenue from Local Cure is the Local Government Transfers. A small amount of the State CURE was also transferred to local governments ($371 million in FY2021 ….. ??? ).</p>
</blockquote>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Notes) <span class="sc">%&gt;%</span> </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds, Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["sum"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"32248642517"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["StateFunds"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Total_received_fy20","2":"3518945000"},{"1":"Total_received_fy21","2":"12632709463"},{"1":"Total_received_fy22","2":"16096988054"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Expenditures"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Community Development","2":"3518945000"},{"1":"Public Health","2":"6638000000"},{"1":"Medicaid","2":"4469242245"},{"1":"K-12","2":"7875455272"},{"1":"Federal Other","2":"8127000000"},{"1":"Transit","2":"1620000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Notes"],"name":[1],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"CARES","2":"8888412218"},{"1":"Other *","2":"7263242245"},{"1":"CRRSA","2":"2915000000"},{"1":"ARPA","2":"13181988054"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div><div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["StateFunds"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Expenditures"],"name":[2],"type":["fct"],"align":["left"]},{"label":["sum"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Total_received_fy20","2":"Community Development","3":"3518945000"},{"1":"Total_received_fy21","2":"Public Health","3":"5974000000"},{"1":"Total_received_fy21","2":"Medicaid","3":"4469242245"},{"1":"Total_received_fy21","2":"K-12","3":"569467218"},{"1":"Total_received_fy21","2":"Transit","3":"1620000000"},{"1":"Total_received_fy22","2":"Public Health","3":"664000000"},{"1":"Total_received_fy22","2":"K-12","3":"7305988054"},{"1":"Total_received_fy22","2":"Federal Other","3":"8127000000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><a href="https://cheatography.com/seleven/cheat-sheets/ggalluvial/">ggsankey info and example</a></p>
<p><img src="images/image-2109120559.png" class="img-fluid" width="346"></p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Background Info</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./LocalTransfers.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Local Transfers</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb30" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Federal COVID Money Received</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE, message=FALSE, echo=FALSE}</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smooth)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geofacet)</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fredr)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsankey)</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalluvial)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>Dropping revenue source "Federal Stimulus Package" from the IOC revenue data is one way to start estimating how revenue will look after the COVID relief ends. The graphs below show Illinois revenue with and without Federal Stimulus Package revenue. It is important to note that only the \$8.127 ARPA State CURE and \$3.519 CARES CRF/State CURE revenue were labeled as "Federal Stimulus Package" in the IOC revenue data. There was still an additional \$12 billion dollars in other federal revenue that went to the state in FY22 compared to FY19. When trying to understand the states finances and the yearly fiscal gap, we also need to understand when and where the funds were considered revenue in the IOC data and consider the fiscal year that the funds were spent. Finally, allocations or expenditures may be grouped and labeled differently by the State compared to the Fiscal Futures project categorization. Some items that the federal relief are spent on are not included in Fiscal Gap calculations (e.g. the Unemployment Insurance Trust Fund repayments). The biggest challenge when determining the Fiscal Gap for Illinois centers around the timing of revenue and expenditures occurring in different fiscal years during the COVID response.</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"rev_temp.csv"</span>)</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>fedrev<span class="ot">&lt;-</span> rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"58"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"59"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"57"</span>) </span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Revenue =</span> <span class="fu">sum</span>(receipts))</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source_name_AWM <span class="sc">==</span> <span class="st">"FEDERAL STIMULUS PACKAGE"</span> <span class="sc">&amp;</span> fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>)</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fy<span class="sc">&gt;</span><span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name) <span class="sc">%&gt;%</span> </span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>receipts) <span class="sc">%&gt;%</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> fy, <span class="at">values_from =</span> receipts)</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts)) <span class="sc">+</span></span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Federal Revenue"</span>, </span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Millions of Dollars"</span>, <span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">legend.title =</span> <span class="fu">element_blank</span>()  )<span class="sc">+</span></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">45000</span>))</span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a>fedrev <span class="sc">%&gt;%</span> </span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source_name_AWM <span class="sc">!=</span> <span class="st">"FEDERAL STIMULUS PACKAGE"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy) <span class="sc">%&gt;%</span> </span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts)) <span class="sc">+</span></span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Federal EXCEPT Federal Stimulus Package"</span>, </span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Millions of Dollars"</span>, <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note: Dropping Federal Stimulus Package revenue only removes the $3.5 billion from FY20, </span></span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a><span class="st">       $0.3 billion from FY21, and $8.5 billion from FY22. Also drops Great Recession Aid in 2009.</span></span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a><span class="st">       There is still over $12 billion more in Federal Revenue compared to FY19."</span>) <span class="sc">+</span> </span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, <span class="at">legend.title =</span> <span class="fu">element_blank</span>()  ) <span class="sc">+</span></span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">45000</span>))</span>
<span id="cb30-81"><a href="#cb30-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-82"><a href="#cb30-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-83"><a href="#cb30-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-84"><a href="#cb30-84" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-85"><a href="#cb30-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-86"><a href="#cb30-86" aria-hidden="true" tabindex="-1"></a><span class="fu">## COVID Money Tracker Data</span></span>
<span id="cb30-87"><a href="#cb30-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-88"><a href="#cb30-88" aria-hidden="true" tabindex="-1"></a>Data was downloaded from COVIDMoneyTracker.org for the State of Illinois. Values reflect the amount committed and not all funds have been disbursed yet. It does not include aid for households or loans to businesses. Data file is named federalcoviddollars.xlsx in Github page used to create this website.</span>
<span id="cb30-89"><a href="#cb30-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-90"><a href="#cb30-90" aria-hidden="true" tabindex="-1"></a>A little information on Sankey graphs is below:</span>
<span id="cb30-91"><a href="#cb30-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-92"><a href="#cb30-92" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The axis is how the observations are grouped at each step. There are multiple axes.</span>
<span id="cb30-93"><a href="#cb30-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Strata are the options that exist for each level. (e.g. Year received can be 2021 or 2022)</span>
<span id="cb30-94"><a href="#cb30-94" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Alluvium correspond to the fixed value of each axis variable. Proportional to how the sum of however you are grouping your data.</span>
<span id="cb30-95"><a href="#cb30-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Flows are the segments of the alluvia between adjacent axes.</span>
<span id="cb30-96"><a href="#cb30-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-97"><a href="#cb30-97" aria-hidden="true" tabindex="-1"></a>Read the charts from the top to the bottom. Most of the graphs below begin with either the year the money was committed or the name of the Law that provided the funds and then shows it flowing down to either who received the money or how it was spent.</span>
<span id="cb30-98"><a href="#cb30-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-99"><a href="#cb30-99" aria-hidden="true" tabindex="-1"></a>The graphs below focus on when the money from each Federal Act arrived and where it was received (local governments, the State government, or directly to a state department) and the spending category that it would be considered using the Fiscal Futures categorization. The State government received \$11.7 billion, state departments received \$31.4 billion, and local governments received \$8.9 billion between FY 2020 and FY 2022. Not all funds have been distributed by the federal government, but they have been committed on the federal level and allocated on the state level.</span>
<span id="cb30-100"><a href="#cb30-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-101"><a href="#cb30-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-102"><a href="#cb30-102" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"federalcoviddollars.xlsx"</span>)</span>
<span id="cb30-103"><a href="#cb30-103" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> </span>
<span id="cb30-104"><a href="#cb30-104" aria-hidden="true" tabindex="-1"></a>  <span class="co">#select(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) %&gt;%</span></span>
<span id="cb30-105"><a href="#cb30-105" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  filter(StFund == "Total") %&gt;%</span></span>
<span id="cb30-106"><a href="#cb30-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-107"><a href="#cb30-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(FY, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"FY20"</span>, <span class="st">"FY21"</span>, <span class="st">"FY22"</span>)),</span>
<span id="cb30-108"><a href="#cb30-108" aria-hidden="true" tabindex="-1"></a>        <span class="at">Legislation2 =</span> <span class="fu">factor</span>(Legislation2, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Other"</span>, <span class="st">"CARES"</span>, <span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)),</span>
<span id="cb30-109"><a href="#cb30-109" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Legislation1 =</span> <span class="fu">factor</span>(Legislation, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Families First"</span>, <span class="st">"CARES"</span>, <span class="st">"PPP &amp; Health Care"</span>, <span class="st">"Response &amp; Relief"</span>, <span class="st">"ARPA"</span>))</span>
<span id="cb30-110"><a href="#cb30-110" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-111"><a href="#cb30-111" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb30-112"><a href="#cb30-112" aria-hidden="true" tabindex="-1"></a>                 <span class="co">#  Expenditures = factor(Expenditures, levels = c("Community Development", "Public Health", "Medicaid", "K-12", "Federal Other", "Transit")),</span></span>
<span id="cb30-113"><a href="#cb30-113" aria-hidden="true" tabindex="-1"></a>      <span class="co">#   Notes = factor(Notes, levels = c(  "CARES", "Other *","CRRSA", "ARPA")))</span></span>
<span id="cb30-114"><a href="#cb30-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-115"><a href="#cb30-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-116"><a href="#cb30-116" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-117"><a href="#cb30-117" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis3 =</span> FY, <span class="at">axis2 =</span> <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-118"><a href="#cb30-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-119"><a href="#cb30-119" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-120"><a href="#cb30-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-121"><a href="#cb30-121" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-122"><a href="#cb30-122" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-123"><a href="#cb30-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-124"><a href="#cb30-124" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-125"><a href="#cb30-125" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-126"><a href="#cb30-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$52 Million Federal COVID Relief to Illinois over 3 years"</span>)</span>
<span id="cb30-127"><a href="#cb30-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-128"><a href="#cb30-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-129"><a href="#cb30-129" aria-hidden="true" tabindex="-1"></a><span class="co">#switches fiscal Year and Broad Category. Not as helpful. </span></span>
<span id="cb30-130"><a href="#cb30-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-131"><a href="#cb30-131" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(sankey, </span></span>
<span id="cb30-132"><a href="#cb30-132" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = `Dollars Received`, axis2 = FY, axis3 = `Broad Category`, axis1=FF_Cat2, label = "stratum")) +</span></span>
<span id="cb30-133"><a href="#cb30-133" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = Legislation), color = "black", reverse=FALSE) +</span></span>
<span id="cb30-134"><a href="#cb30-134" aria-hidden="true" tabindex="-1"></a><span class="co">#  # guides(fill = FALSE) +   </span></span>
<span id="cb30-135"><a href="#cb30-135" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb30-136"><a href="#cb30-136" aria-hidden="true" tabindex="-1"></a><span class="co"># coord_flip()+</span></span>
<span id="cb30-137"><a href="#cb30-137" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb30-138"><a href="#cb30-138" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() +</span></span>
<span id="cb30-139"><a href="#cb30-139" aria-hidden="true" tabindex="-1"></a><span class="co">#      geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE)+</span></span>
<span id="cb30-140"><a href="#cb30-140" aria-hidden="true" tabindex="-1"></a><span class="co">#     theme(legend.position = "bottom")+</span></span>
<span id="cb30-141"><a href="#cb30-141" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("$52 Million Federal COVID Relief to Illinois over 3 years")</span></span>
<span id="cb30-142"><a href="#cb30-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-143"><a href="#cb30-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-144"><a href="#cb30-144" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-145"><a href="#cb30-145" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-146"><a href="#cb30-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-147"><a href="#cb30-147" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-148"><a href="#cb30-148" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-149"><a href="#cb30-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-150"><a href="#cb30-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-151"><a href="#cb30-151" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-152"><a href="#cb30-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-153"><a href="#cb30-153" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>,FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-154"><a href="#cb30-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-155"><a href="#cb30-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-156"><a href="#cb30-156" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat2) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from=</span><span class="st">"FY"</span>, <span class="at">values_from =</span> sum)</span>
<span id="cb30-157"><a href="#cb30-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-158"><a href="#cb30-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-159"><a href="#cb30-159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-160"><a href="#cb30-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-161"><a href="#cb30-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-162"><a href="#cb30-162" aria-hidden="true" tabindex="-1"></a><span class="do">## Same graph but without labels for Publisher ##</span></span>
<span id="cb30-163"><a href="#cb30-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-164"><a href="#cb30-164" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-165"><a href="#cb30-165" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis3 =</span> FY, <span class="at">axis2 =</span> <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-166"><a href="#cb30-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-167"><a href="#cb30-167" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-168"><a href="#cb30-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-169"><a href="#cb30-169" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-170"><a href="#cb30-170" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-171"><a href="#cb30-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-172"><a href="#cb30-172" aria-hidden="true" tabindex="-1"></a>   <span class="co">#  geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE)+</span></span>
<span id="cb30-173"><a href="#cb30-173" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-174"><a href="#cb30-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$52 Million Federal COVID Relief to Illinois over 3 years"</span>)</span>
<span id="cb30-175"><a href="#cb30-175" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-176"><a href="#cb30-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-177"><a href="#cb30-177" aria-hidden="true" tabindex="-1"></a>Legislation values were: ARPA = \$25.6 Billion; CARES = \$15.7 Billion; Families First = \$4.5 Billion; PPP &amp; Health Care = \$2.8 Billion; Response &amp; Relief = \$3.4 Billion. Additional labels were added using Publisher to create the following image:</span>
<span id="cb30-178"><a href="#cb30-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-179"><a href="#cb30-179" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/image-105349095.png)</span></span>
<span id="cb30-180"><a href="#cb30-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-181"><a href="#cb30-181" aria-hidden="true" tabindex="-1"></a>Illinois received \$11.7 billion dollars from State Fiscal Recovery Funds and \$31.4 billion in other federal revenue to state departments. This other federal revenue frequently came in the form of increased or new grants to many State Departments that normally receive federal funding. Local Governments within Illinois received an additional \$8.9 billion for economic recovery but we do not include funds given straight to localities in our State COVID recovery fund calculations or Fiscal Gap analysis.</span>
<span id="cb30-182"><a href="#cb30-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-183"><a href="#cb30-183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-184"><a href="#cb30-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-185"><a href="#cb30-185" aria-hidden="true" tabindex="-1"></a><span class="co"># another attempt at showing more parts of the data but it is not as useful.</span></span>
<span id="cb30-186"><a href="#cb30-186" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat <span class="sc">!=</span> <span class="st">"Excluded"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-187"><a href="#cb30-187" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb30-188"><a href="#cb30-188" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">Broad Category</span><span class="st">`</span>, <span class="at">axis3 =</span> Category, <span class="at">axis2 =</span> Recipient, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-189"><a href="#cb30-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-190"><a href="#cb30-190" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +</span></span>
<span id="cb30-191"><a href="#cb30-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-192"><a href="#cb30-192" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-193"><a href="#cb30-193" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-194"><a href="#cb30-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-195"><a href="#cb30-195" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-196"><a href="#cb30-196" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-197"><a href="#cb30-197" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"State CURE and State Departments Received $43.1 Billion"</span>)</span>
<span id="cb30-198"><a href="#cb30-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-199"><a href="#cb30-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-200"><a href="#cb30-200" aria-hidden="true" tabindex="-1"></a>Below is a graph showing federal stimulus money that was received in each year, the federal agency/fund that it came from, and what kind of revenue it was considered (Federal Other, transportation, or medicaid) who received the money (e.g. the State of Illinois, Department of Human Services, Local Governments, etc.).</span>
<span id="cb30-201"><a href="#cb30-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-202"><a href="#cb30-202" aria-hidden="true" tabindex="-1"></a>When Local Funds are included, \$15.7 billion was received in FY20, \$7.24 billion in FY21, and \$29 billion was received in FY22 from multiple COVID response Federal Acts.</span>
<span id="cb30-203"><a href="#cb30-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-204"><a href="#cb30-204" aria-hidden="true" tabindex="-1"></a>When excluding the money that went straight to local governments, then the state received \$12.7 billion in FY20 (CARES Act), \$7.2 billion in FY21, and \$23 billion was committed in FY22 (ARP Act). This includes both State CURE funds that had more flexibility in how they were spent as well as the grants and that went to State Departments for specific purposes.</span>
<span id="cb30-205"><a href="#cb30-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-206"><a href="#cb30-206" aria-hidden="true" tabindex="-1"></a>~~The graph above shows the year received, the federal government's fund name or purpose, the department that received the funds, and the fiscal futures spending category that the purpose falls under.~~</span>
<span id="cb30-207"><a href="#cb30-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-208"><a href="#cb30-208" aria-hidden="true" tabindex="-1"></a>Again, these graphs show the funds that were received and their intended purpose, NOT the data on how or when it was spent.</span>
<span id="cb30-209"><a href="#cb30-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-210"><a href="#cb30-210" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Without Local Government Relief</span></span>
<span id="cb30-211"><a href="#cb30-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-214"><a href="#cb30-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb30-215"><a href="#cb30-215" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2<span class="sc">!=</span> <span class="st">"Excluded"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-216"><a href="#cb30-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>, <span class="at">axis4 =</span> FY, <span class="at">axis3=</span> <span class="st">`</span><span class="at">Category</span><span class="st">`</span>,  <span class="at">axis1=</span>FF_Cat2</span>
<span id="cb30-217"><a href="#cb30-217" aria-hidden="true" tabindex="-1"></a>          <span class="co"># , label = "stratum"</span></span>
<span id="cb30-218"><a href="#cb30-218" aria-hidden="true" tabindex="-1"></a>           )) <span class="sc">+</span></span>
<span id="cb30-219"><a href="#cb30-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Legislation, <span class="at">label =</span> <span class="st">"flow"</span>), </span>
<span id="cb30-220"><a href="#cb30-220" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-221"><a href="#cb30-221" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-222"><a href="#cb30-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-223"><a href="#cb30-223" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), </span>
<span id="cb30-224"><a href="#cb30-224" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-225"><a href="#cb30-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-226"><a href="#cb30-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-227"><a href="#cb30-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-228"><a href="#cb30-228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-229"><a href="#cb30-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Without Local government relief:</span></span>
<span id="cb30-230"><a href="#cb30-230" aria-hidden="true" tabindex="-1"></a><span class="st">          State Received $12.7 Billion in FY20, $7 Billion in FY21, and $23 Billion in FY22"</span>)</span>
<span id="cb30-231"><a href="#cb30-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-232"><a href="#cb30-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-233"><a href="#cb30-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-234"><a href="#cb30-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-235"><a href="#cb30-235" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-236"><a href="#cb30-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-237"><a href="#cb30-237" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-238"><a href="#cb30-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-239"><a href="#cb30-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-240"><a href="#cb30-240" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Recipient)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-241"><a href="#cb30-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-242"><a href="#cb30-242" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-243"><a href="#cb30-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-244"><a href="#cb30-244" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, Recipient)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb30-245"><a href="#cb30-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-246"><a href="#cb30-246" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb30-247"><a href="#cb30-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-248"><a href="#cb30-248" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb30-249"><a href="#cb30-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-250"><a href="#cb30-250" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2 <span class="sc">!=</span> <span class="st">"Excluded"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>))</span>
<span id="cb30-251"><a href="#cb30-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-252"><a href="#cb30-252" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Legislation, FF_Cat2)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Legislation, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb30-253"><a href="#cb30-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-254"><a href="#cb30-254" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY, FF_Cat2)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="at">TotalReceived=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">Dollars Received</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY, <span class="at">values_from =</span> TotalReceived)</span>
<span id="cb30-255"><a href="#cb30-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-256"><a href="#cb30-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-257"><a href="#cb30-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-258"><a href="#cb30-258" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold', include=FALSE}</span></span>
<span id="cb30-259"><a href="#cb30-259" aria-hidden="true" tabindex="-1"></a><span class="co"># More graph variations.</span></span>
<span id="cb30-260"><a href="#cb30-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-261"><a href="#cb30-261" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"attemptJan15.xlsx"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2 <span class="sc">!=</span> <span class="st">"Exclude"</span>)</span>
<span id="cb30-262"><a href="#cb30-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-263"><a href="#cb30-263" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, </span>
<span id="cb30-264"><a href="#cb30-264" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> Committed, <span class="at">axis4 =</span> FY_Received, <span class="at">axis3 =</span> State_Local, <span class="at">axis2 =</span> StateOrDepartments, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-265"><a href="#cb30-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-266"><a href="#cb30-266" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-267"><a href="#cb30-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-268"><a href="#cb30-268" aria-hidden="true" tabindex="-1"></a> <span class="co"># geom_text(stat = "stratum", label.strata = TRUE) + </span></span>
<span id="cb30-269"><a href="#cb30-269" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-270"><a href="#cb30-270" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-271"><a href="#cb30-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-272"><a href="#cb30-272" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-273"><a href="#cb30-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-274"><a href="#cb30-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$43 Billion for Illinois (Excluding Local CURE funds for Local Governments)"</span>)</span>
<span id="cb30-275"><a href="#cb30-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-276"><a href="#cb30-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-277"><a href="#cb30-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-278"><a href="#cb30-278" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2 <span class="sc">!=</span> <span class="st">"Exclude"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-279"><a href="#cb30-279" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Committed, <span class="at">axis3 =</span> StateOrDepartments, <span class="at">axis2=</span>FundPurpose2, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-280"><a href="#cb30-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-281"><a href="#cb30-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-282"><a href="#cb30-282" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-283"><a href="#cb30-283" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-284"><a href="#cb30-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-285"><a href="#cb30-285" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb30-286"><a href="#cb30-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Received: $16 Billion for Illinois + $23.3 for State Departments ($39.7 Billion total)"</span>)</span>
<span id="cb30-287"><a href="#cb30-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-288"><a href="#cb30-288" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FF_Cat2 <span class="sc">!=</span> <span class="st">"Exclude"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-289"><a href="#cb30-289" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Committed, <span class="at">axis3 =</span> StateOrDepartments, <span class="at">axis2=</span><span class="st">`</span><span class="at">Government Program</span><span class="st">`</span>, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-290"><a href="#cb30-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-291"><a href="#cb30-291" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-292"><a href="#cb30-292" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-293"><a href="#cb30-293" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-294"><a href="#cb30-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-295"><a href="#cb30-295" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb30-296"><a href="#cb30-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Received: $16 Billion for Illinois + $23.3 for State Departments ($39.7 Billion total)"</span>)</span>
<span id="cb30-297"><a href="#cb30-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-298"><a href="#cb30-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-299"><a href="#cb30-299" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(State_Local) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed))</span>
<span id="cb30-300"><a href="#cb30-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-301"><a href="#cb30-301" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateOrDepartments) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed))</span>
<span id="cb30-302"><a href="#cb30-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-303"><a href="#cb30-303" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateOrDepartments, FF_Cat) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed))</span>
<span id="cb30-304"><a href="#cb30-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-305"><a href="#cb30-305" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateOrDepartments, FF_Cat, FY_Received) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY_Received, <span class="at">values_from =</span> sum)</span>
<span id="cb30-306"><a href="#cb30-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-307"><a href="#cb30-307" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_Local <span class="sc">!=</span><span class="st">"Local"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Law, FF_Cat, FY_Received) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY_Received, <span class="at">values_from =</span> sum)</span>
<span id="cb30-308"><a href="#cb30-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-309"><a href="#cb30-309" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateOrDepartments, FY_Received) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY_Received, <span class="at">values_from =</span> sum)</span>
<span id="cb30-310"><a href="#cb30-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-311"><a href="#cb30-311" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_Local <span class="sc">!=</span><span class="st">"Local"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Law, FF_Cat) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(Committed)) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> sum)</span>
<span id="cb30-312"><a href="#cb30-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-313"><a href="#cb30-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-314"><a href="#cb30-314" aria-hidden="true" tabindex="-1"></a><span class="fu">## Expenditures Graphs</span></span>
<span id="cb30-315"><a href="#cb30-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-316"><a href="#cb30-316" aria-hidden="true" tabindex="-1"></a>Federal expenditures from CURE and other major funds . Uses the <span class="in">`fedCUREexpenditures.xlsx`</span> file.</span>
<span id="cb30-317"><a href="#cb30-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-318"><a href="#cb30-318" aria-hidden="true" tabindex="-1"></a>This data comes from Illinois Comptroller expenditure data, Legislative Budget Oversight Commission (LBOC) Reports, and the <span class="co">[</span><span class="ot">ARPA Annual Recovery Plan</span><span class="co">](https://budget.illinois.gov/content/dam/soi/en/web/budget/documents/arpa/IL%20Recovery%20Plan%20Performance%20Report%202022.pdf)</span> detailing the State's use of State and Local Fiscal Recovery Funds (SLFRF) which is prepared by the Governor's Office of Management and Budget (GOMB).</span>
<span id="cb30-319"><a href="#cb30-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-320"><a href="#cb30-320" aria-hidden="true" tabindex="-1"></a>The graphs below do not include FY23 allocations for federal funds. Dates on top are Fiscal Year received. Dates in the middle of the graph are Fiscal Year expenditures. Federal funds for COVID recovery have been received and spent in different years. This makes calculating and comparing the fiscal gap difficult.</span>
<span id="cb30-321"><a href="#cb30-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-322"><a href="#cb30-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-323"><a href="#cb30-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-324"><a href="#cb30-324" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"fedCUREexpenditures.xlsx"</span>)</span>
<span id="cb30-325"><a href="#cb30-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-326"><a href="#cb30-326" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> cure_exp <span class="sc">%&gt;%</span></span>
<span id="cb30-327"><a href="#cb30-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FY_Spent <span class="sc">&lt;</span><span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-328"><a href="#cb30-328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb30-329"><a href="#cb30-329" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Spent =</span> <span class="fu">factor</span>(FY_Spent, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>, <span class="st">"2023+"</span>)),</span>
<span id="cb30-330"><a href="#cb30-330" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Received =</span> <span class="fu">factor</span>(FY_Received, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>)),</span>
<span id="cb30-331"><a href="#cb30-331" aria-hidden="true" tabindex="-1"></a>         <span class="at">FF_Cat =</span> <span class="fu">factor</span>(FF_Cat, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Econ Dev"</span>, <span class="st">"Human Services"</span>, <span class="st">"K-12"</span>, <span class="st">"Local Transfers"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Safety"</span>, <span class="st">"Lost Revenue"</span>, <span class="st">"UI Fund"</span>, <span class="st">"FY23+"</span>)))</span>
<span id="cb30-332"><a href="#cb30-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-333"><a href="#cb30-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-334"><a href="#cb30-334" aria-hidden="true" tabindex="-1"></a>cure_exp<span class="sc">%&gt;%</span> </span>
<span id="cb30-335"><a href="#cb30-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-336"><a href="#cb30-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-337"><a href="#cb30-337" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-338"><a href="#cb30-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb30-339"><a href="#cb30-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-340"><a href="#cb30-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-341"><a href="#cb30-341" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-342"><a href="#cb30-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FY_Spent</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-343"><a href="#cb30-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-344"><a href="#cb30-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-345"><a href="#cb30-345" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-346"><a href="#cb30-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-347"><a href="#cb30-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-348"><a href="#cb30-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-349"><a href="#cb30-349" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-350"><a href="#cb30-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(State_local2)<span class="sc">%&gt;%</span> </span>
<span id="cb30-351"><a href="#cb30-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-352"><a href="#cb30-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-353"><a href="#cb30-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-354"><a href="#cb30-354" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-355"><a href="#cb30-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FF_Cat</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-356"><a href="#cb30-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-357"><a href="#cb30-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-358"><a href="#cb30-358" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-359"><a href="#cb30-359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law)<span class="sc">%&gt;%</span> </span>
<span id="cb30-360"><a href="#cb30-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-361"><a href="#cb30-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-362"><a href="#cb30-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-363"><a href="#cb30-363" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-364"><a href="#cb30-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent, FF_Cat)<span class="sc">%&gt;%</span> </span>
<span id="cb30-365"><a href="#cb30-365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-366"><a href="#cb30-366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> FY_Spent, <span class="at">values_from =</span> Expenditures) </span>
<span id="cb30-367"><a href="#cb30-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-368"><a href="#cb30-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-369"><a href="#cb30-369" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-370"><a href="#cb30-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb30-371"><a href="#cb30-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-372"><a href="#cb30-372" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(FY_Received)</span>
<span id="cb30-373"><a href="#cb30-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-374"><a href="#cb30-374" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-375"><a href="#cb30-375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent)<span class="sc">%&gt;%</span> </span>
<span id="cb30-376"><a href="#cb30-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-377"><a href="#cb30-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(FY_Spent)</span>
<span id="cb30-378"><a href="#cb30-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-379"><a href="#cb30-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-380"><a href="#cb30-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-381"><a href="#cb30-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-382"><a href="#cb30-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-383"><a href="#cb30-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-384"><a href="#cb30-384" aria-hidden="true" tabindex="-1"></a><span class="co"># Year Spent, Agency received, FF Spending Category </span></span>
<span id="cb30-385"><a href="#cb30-385" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-386"><a href="#cb30-386" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> FY_Spent, <span class="at">axis2 =</span> Agency, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-387"><a href="#cb30-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-388"><a href="#cb30-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-389"><a href="#cb30-389" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">label.strata =</span> <span class="cn">TRUE</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb30-390"><a href="#cb30-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-391"><a href="#cb30-391" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-392"><a href="#cb30-392" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-393"><a href="#cb30-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-394"><a href="#cb30-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-395"><a href="#cb30-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"CURE &amp; ESSER $12.2 Billion Spent in FY21 &amp; FY22: </span></span>
<span id="cb30-396"><a href="#cb30-396" aria-hidden="true" tabindex="-1"></a><span class="st">          Year Spent, Agency that Spent it &amp; FF Spending Category"</span>)</span>
<span id="cb30-397"><a href="#cb30-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-398"><a href="#cb30-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-399"><a href="#cb30-399" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch Year Spent &amp; Agency received, FF Spending Category </span></span>
<span id="cb30-400"><a href="#cb30-400" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-401"><a href="#cb30-401" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent , <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-402"><a href="#cb30-402" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-403"><a href="#cb30-403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-404"><a href="#cb30-404" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">label.strata =</span> <span class="cn">TRUE</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb30-405"><a href="#cb30-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-406"><a href="#cb30-406" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-407"><a href="#cb30-407" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-408"><a href="#cb30-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-409"><a href="#cb30-409" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-410"><a href="#cb30-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-411"><a href="#cb30-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Same as above but Switched Axis 3 and 2: </span></span>
<span id="cb30-412"><a href="#cb30-412" aria-hidden="true" tabindex="-1"></a><span class="st">          Agency received, Year Spent, FF Spending Category "</span>)</span>
<span id="cb30-413"><a href="#cb30-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-414"><a href="#cb30-414" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-415"><a href="#cb30-415" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>Fund, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-416"><a href="#cb30-416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-417"><a href="#cb30-417" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-418"><a href="#cb30-418" aria-hidden="true" tabindex="-1"></a> <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-419"><a href="#cb30-419" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-420"><a href="#cb30-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-421"><a href="#cb30-421" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-422"><a href="#cb30-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-423"><a href="#cb30-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-424"><a href="#cb30-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Federal Fund, Year Spent, and State Fund"</span>)</span>
<span id="cb30-425"><a href="#cb30-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-426"><a href="#cb30-426" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-427"><a href="#cb30-427" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> Agency, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-428"><a href="#cb30-428" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-429"><a href="#cb30-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-430"><a href="#cb30-430" aria-hidden="true" tabindex="-1"></a> <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-431"><a href="#cb30-431" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-432"><a href="#cb30-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-433"><a href="#cb30-433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-434"><a href="#cb30-434" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-435"><a href="#cb30-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-436"><a href="#cb30-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-437"><a href="#cb30-437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Department that Received Revenue &amp; Purpose of Expenditure"</span>)</span>
<span id="cb30-438"><a href="#cb30-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-439"><a href="#cb30-439" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(cure_exp, </span></span>
<span id="cb30-440"><a href="#cb30-440" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = `Agency_grouped`, axis3 = `State_local2`, axis2 = Agency, axis1=FF_Cat, label = "stratum")) +</span></span>
<span id="cb30-441"><a href="#cb30-441" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = Law), color = "black", reverse=FALSE) +</span></span>
<span id="cb30-442"><a href="#cb30-442" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb30-443"><a href="#cb30-443" aria-hidden="true" tabindex="-1"></a><span class="co">#  coord_flip()+</span></span>
<span id="cb30-444"><a href="#cb30-444" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb30-445"><a href="#cb30-445" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() + </span></span>
<span id="cb30-446"><a href="#cb30-446" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position="bottom")+</span></span>
<span id="cb30-447"><a href="#cb30-447" aria-hidden="true" tabindex="-1"></a><span class="co">#         geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE) +</span></span>
<span id="cb30-448"><a href="#cb30-448" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position="bottom")+</span></span>
<span id="cb30-449"><a href="#cb30-449" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb30-450"><a href="#cb30-450" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("Same as above but y = Agency Grouped?</span></span>
<span id="cb30-451"><a href="#cb30-451" aria-hidden="true" tabindex="-1"></a><span class="co">#           Expenditures: Department that Received Revenue &amp; How money was used")</span></span>
<span id="cb30-452"><a href="#cb30-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-453"><a href="#cb30-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-454"><a href="#cb30-454" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-455"><a href="#cb30-455" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-456"><a href="#cb30-456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-457"><a href="#cb30-457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-458"><a href="#cb30-458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-459"><a href="#cb30-459" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-460"><a href="#cb30-460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-461"><a href="#cb30-461" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-462"><a href="#cb30-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-463"><a href="#cb30-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, </span></span>
<span id="cb30-464"><a href="#cb30-464" aria-hidden="true" tabindex="-1"></a><span class="st">          Year Spent, and FF Expenditure Purpose"</span>)</span>
<span id="cb30-465"><a href="#cb30-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-466"><a href="#cb30-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-467"><a href="#cb30-467" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-468"><a href="#cb30-468" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-469"><a href="#cb30-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-470"><a href="#cb30-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-471"><a href="#cb30-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-472"><a href="#cb30-472" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-473"><a href="#cb30-473" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-474"><a href="#cb30-474" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-475"><a href="#cb30-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-476"><a href="#cb30-476" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, Year Spent, </span></span>
<span id="cb30-477"><a href="#cb30-477" aria-hidden="true" tabindex="-1"></a><span class="st">          &amp; FF Expenditure Purpose (Using FF_Cat2 variable)</span></span>
<span id="cb30-478"><a href="#cb30-478" aria-hidden="true" tabindex="-1"></a><span class="st">          Public Health and Safety Combined"</span>)</span>
<span id="cb30-479"><a href="#cb30-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-480"><a href="#cb30-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-481"><a href="#cb30-481" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-482"><a href="#cb30-482" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> Fund, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-483"><a href="#cb30-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-484"><a href="#cb30-484" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-485"><a href="#cb30-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-486"><a href="#cb30-486" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-487"><a href="#cb30-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-488"><a href="#cb30-488" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-489"><a href="#cb30-489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-490"><a href="#cb30-490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures: Funds from the State of Illinois or State Departments, </span></span>
<span id="cb30-491"><a href="#cb30-491" aria-hidden="true" tabindex="-1"></a><span class="st">          State Fund Name, and FF Expenditure Category"</span>)</span>
<span id="cb30-492"><a href="#cb30-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-493"><a href="#cb30-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-494"><a href="#cb30-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-495"><a href="#cb30-495" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels with labels</span></span>
<span id="cb30-496"><a href="#cb30-496" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-497"><a href="#cb30-497" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-498"><a href="#cb30-498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-499"><a href="#cb30-499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-500"><a href="#cb30-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-501"><a href="#cb30-501" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-502"><a href="#cb30-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-503"><a href="#cb30-503" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-504"><a href="#cb30-504" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-505"><a href="#cb30-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-506"><a href="#cb30-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures So far: Year Received, Federal Fund, Year Spent,</span></span>
<span id="cb30-507"><a href="#cb30-507" aria-hidden="true" tabindex="-1"></a><span class="st">          &amp; How Money was Used"</span>)</span>
<span id="cb30-508"><a href="#cb30-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-509"><a href="#cb30-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-510"><a href="#cb30-510" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_local <span class="sc">==</span> <span class="st">"State CURE"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-511"><a href="#cb30-511" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> FY_Received, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Agency</span><span class="st">`</span>,  <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-512"><a href="#cb30-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-513"><a href="#cb30-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-514"><a href="#cb30-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-515"><a href="#cb30-515" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-516"><a href="#cb30-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-517"><a href="#cb30-517" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-518"><a href="#cb30-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-519"><a href="#cb30-519" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-520"><a href="#cb30-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"State CURE expenditures: Year Received by State Department, Year Spent,</span></span>
<span id="cb30-521"><a href="#cb30-521" aria-hidden="true" tabindex="-1"></a><span class="st">          and how it was spent so far"</span>)</span>
<span id="cb30-522"><a href="#cb30-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-523"><a href="#cb30-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-524"><a href="#cb30-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-525"><a href="#cb30-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-526"><a href="#cb30-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-527"><a href="#cb30-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-528"><a href="#cb30-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-529"><a href="#cb30-529" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-530"><a href="#cb30-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-531"><a href="#cb30-531" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels, No labels</span></span>
<span id="cb30-532"><a href="#cb30-532" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-533"><a href="#cb30-533" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-534"><a href="#cb30-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-535"><a href="#cb30-535" aria-hidden="true" tabindex="-1"></a>  <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-536"><a href="#cb30-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-537"><a href="#cb30-537" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb30-538"><a href="#cb30-538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-539"><a href="#cb30-539" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-540"><a href="#cb30-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() </span>
<span id="cb30-541"><a href="#cb30-541" aria-hidden="true" tabindex="-1"></a>        <span class="co">#geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE) #+ scale_x_discrete(limits = c("FY Received", "", "FY Spent", "") ) + </span></span>
<span id="cb30-542"><a href="#cb30-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-543"><a href="#cb30-543" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-544"><a href="#cb30-544" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-545"><a href="#cb30-545" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad reject graphs that I won't be using:</span></span>
<span id="cb30-546"><a href="#cb30-546" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-547"><a href="#cb30-547" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>,<span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>,<span class="at">axis2 =</span> Agency, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-548"><a href="#cb30-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-549"><a href="#cb30-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-550"><a href="#cb30-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-551"><a href="#cb30-551" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-552"><a href="#cb30-552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-553"><a href="#cb30-553" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) </span>
<span id="cb30-554"><a href="#cb30-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-555"><a href="#cb30-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-556"><a href="#cb30-556" aria-hidden="true" tabindex="-1"></a><span class="fu">### State CURE Expenditures with FY2023 and beyond allocations</span></span>
<span id="cb30-557"><a href="#cb30-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-558"><a href="#cb30-558" aria-hidden="true" tabindex="-1"></a>Graphs below include how money has been spent in FY21 and FY22 with unspent funds labeled as <span class="in">`FY2023+`</span>.</span>
<span id="cb30-559"><a href="#cb30-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-560"><a href="#cb30-560" aria-hidden="true" tabindex="-1"></a>This image focuses on only the funds that came through the State and Local Fiscal Recovery Fund and a couple additional funds that came through different agencies but were received by the State of Illinois. Other Federal Revenue largely indicates the ESSER funds that were received by ISBE and were spent on K-12 education.</span>
<span id="cb30-561"><a href="#cb30-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-562"><a href="#cb30-562" aria-hidden="true" tabindex="-1"></a>\$3.54 Billion received in FY20 for SFRF, \$11.8 billion received in FY22. Over \$10 billion has gone into the State CURE fund and another \$2.4 billion was received by State Departments. Of that over \$13 billion spent, \$2.7 billion was spent in FY21 and \$8.5 Billion was spent in FY22. The remaining \$2 Billion State CURE funds have been fully allocated and some have been spent already in FY23 (\$500 million transferred to General Revenue for "Lost Revenue" during COVID disruption, remaining dollars on programs and services).</span>
<span id="cb30-563"><a href="#cb30-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-564"><a href="#cb30-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-565"><a href="#cb30-565" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"fedCUREexpenditures.xlsx"</span>)</span>
<span id="cb30-566"><a href="#cb30-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-567"><a href="#cb30-567" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="ot">&lt;-</span> cure_exp <span class="sc">%&gt;%</span></span>
<span id="cb30-568"><a href="#cb30-568" aria-hidden="true" tabindex="-1"></a> <span class="co">#   filter(FY_Spent &lt;2023) %&gt;%</span></span>
<span id="cb30-569"><a href="#cb30-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-570"><a href="#cb30-570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"CRF"</span>, <span class="st">"SLFRF"</span>, <span class="st">"Other Fed Rev"</span>)),</span>
<span id="cb30-571"><a href="#cb30-571" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Spent =</span> <span class="fu">factor</span>(FY_Spent, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>, <span class="st">"2023+"</span>)),</span>
<span id="cb30-572"><a href="#cb30-572" aria-hidden="true" tabindex="-1"></a>         <span class="at">FY_Received =</span> <span class="fu">factor</span>(FY_Received, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>)),</span>
<span id="cb30-573"><a href="#cb30-573" aria-hidden="true" tabindex="-1"></a>         <span class="at">FF_Cat =</span> <span class="fu">factor</span>(FF_Cat, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Econ Dev"</span>, <span class="st">"Human Services"</span>, <span class="st">"K-12"</span>, <span class="st">"Local Transfers"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Safety"</span>, <span class="st">"UI Fund"</span>, <span class="st">"Lost Revenue"</span>, <span class="st">"FY23+"</span>))</span>
<span id="cb30-574"><a href="#cb30-574" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb30-575"><a href="#cb30-575" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb30-576"><a href="#cb30-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-577"><a href="#cb30-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-578"><a href="#cb30-578" aria-hidden="true" tabindex="-1"></a><span class="co">#5 levels with labels</span></span>
<span id="cb30-579"><a href="#cb30-579" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-580"><a href="#cb30-580" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>,  <span class="at">axis6 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis5=</span>State_local2, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>, <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-581"><a href="#cb30-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-582"><a href="#cb30-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-583"><a href="#cb30-583" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-584"><a href="#cb30-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-585"><a href="#cb30-585" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-586"><a href="#cb30-586" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"$15.3 Billion in Expenditures and Allocations"</span>)</span>
<span id="cb30-587"><a href="#cb30-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-588"><a href="#cb30-588" aria-hidden="true" tabindex="-1"></a><span class="co">#5 levels with labels</span></span>
<span id="cb30-589"><a href="#cb30-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-590"><a href="#cb30-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-591"><a href="#cb30-591" aria-hidden="true" tabindex="-1"></a><span class="co"># State CURE funds only</span></span>
<span id="cb30-592"><a href="#cb30-592" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State_local2 <span class="sc">==</span> <span class="st">"State"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-593"><a href="#cb30-593" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> Agency, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-594"><a href="#cb30-594" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-595"><a href="#cb30-595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-596"><a href="#cb30-596" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-597"><a href="#cb30-597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-598"><a href="#cb30-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)<span class="sc">+</span></span>
<span id="cb30-599"><a href="#cb30-599" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"State CURE Only: ___ Billion in Expenditures and Allocations"</span>)</span>
<span id="cb30-600"><a href="#cb30-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-601"><a href="#cb30-601" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels with labels</span></span>
<span id="cb30-602"><a href="#cb30-602" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-603"><a href="#cb30-603" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-604"><a href="#cb30-604" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-605"><a href="#cb30-605" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-606"><a href="#cb30-606" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb30-607"><a href="#cb30-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-608"><a href="#cb30-608" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-609"><a href="#cb30-609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-610"><a href="#cb30-610" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"$15.3 Billion in Expenditures and Allocations"</span>)</span>
<span id="cb30-611"><a href="#cb30-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-612"><a href="#cb30-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-613"><a href="#cb30-613" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-614"><a href="#cb30-614" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-615"><a href="#cb30-615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-616"><a href="#cb30-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-617"><a href="#cb30-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-618"><a href="#cb30-618" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-619"><a href="#cb30-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-620"><a href="#cb30-620" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) </span>
<span id="cb30-621"><a href="#cb30-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-622"><a href="#cb30-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-623"><a href="#cb30-623" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-624"><a href="#cb30-624" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-625"><a href="#cb30-625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-626"><a href="#cb30-626" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-627"><a href="#cb30-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-628"><a href="#cb30-628" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-629"><a href="#cb30-629" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-630"><a href="#cb30-630" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)</span>
<span id="cb30-631"><a href="#cb30-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-632"><a href="#cb30-632" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-633"><a href="#cb30-633" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis3 =</span> <span class="st">`</span><span class="at">State_local2</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat2, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-634"><a href="#cb30-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-635"><a href="#cb30-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-636"><a href="#cb30-636" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb30-637"><a href="#cb30-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-638"><a href="#cb30-638" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-639"><a href="#cb30-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb30-640"><a href="#cb30-640" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)</span>
<span id="cb30-641"><a href="#cb30-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-642"><a href="#cb30-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-643"><a href="#cb30-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-644"><a href="#cb30-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-645"><a href="#cb30-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-648"><a href="#cb30-648" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb30-649"><a href="#cb30-649" aria-hidden="true" tabindex="-1"></a><span class="co">#| results: hold</span></span>
<span id="cb30-650"><a href="#cb30-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-651"><a href="#cb30-651" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb30-652"><a href="#cb30-652" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-653"><a href="#cb30-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-654"><a href="#cb30-654" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-655"><a href="#cb30-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-656"><a href="#cb30-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-657"><a href="#cb30-657" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FY_Spent</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-658"><a href="#cb30-658" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-659"><a href="#cb30-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-660"><a href="#cb30-660" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">FF_Cat</span><span class="st">`</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb30-661"><a href="#cb30-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-662"><a href="#cb30-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-663"><a href="#cb30-663" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Law)<span class="sc">%&gt;%</span> </span>
<span id="cb30-664"><a href="#cb30-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-665"><a href="#cb30-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-666"><a href="#cb30-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-667"><a href="#cb30-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-668"><a href="#cb30-668" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-669"><a href="#cb30-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Received)<span class="sc">%&gt;%</span> </span>
<span id="cb30-670"><a href="#cb30-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-671"><a href="#cb30-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-672"><a href="#cb30-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(FY_Received)</span>
<span id="cb30-673"><a href="#cb30-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-674"><a href="#cb30-674" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> </span>
<span id="cb30-675"><a href="#cb30-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Law, FY_Spent)<span class="sc">%&gt;%</span> </span>
<span id="cb30-676"><a href="#cb30-676" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Expenditures=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-677"><a href="#cb30-677" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Law, <span class="at">values_from =</span> Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-678"><a href="#cb30-678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(FY_Spent)</span>
<span id="cb30-679"><a href="#cb30-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-680"><a href="#cb30-680" aria-hidden="true" tabindex="-1"></a>cure_exp <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Sum=</span><span class="fu">sum</span>(<span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>))</span>
<span id="cb30-681"><a href="#cb30-681" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-682"><a href="#cb30-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-683"><a href="#cb30-683" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-684"><a href="#cb30-684" aria-hidden="true" tabindex="-1"></a><span class="co">#4 levels, No labels</span></span>
<span id="cb30-685"><a href="#cb30-685" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cure_exp, </span>
<span id="cb30-686"><a href="#cb30-686" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">FY Expenditures</span><span class="st">`</span>, <span class="at">axis4 =</span> <span class="st">`</span><span class="at">FY_Received</span><span class="st">`</span>,  <span class="at">axis3 =</span> <span class="st">`</span><span class="at">Federal Funds</span><span class="st">`</span>, <span class="at">axis2 =</span> FY_Spent, <span class="at">axis1=</span>FF_Cat, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-687"><a href="#cb30-687" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Law), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-688"><a href="#cb30-688" aria-hidden="true" tabindex="-1"></a>  <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-689"><a href="#cb30-689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-690"><a href="#cb30-690" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_text(stat = "stratum", aes(label = after_stat(stratum)), reverse=FALSE) + </span></span>
<span id="cb30-691"><a href="#cb30-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-692"><a href="#cb30-692" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-693"><a href="#cb30-693" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()<span class="co"># + </span></span>
<span id="cb30-694"><a href="#cb30-694" aria-hidden="true" tabindex="-1"></a>        <span class="co">#geom_text(stat = "stratum", aes(label = after_stat(stratum)), size = 2, reverse=FALSE)   </span></span>
<span id="cb30-695"><a href="#cb30-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-696"><a href="#cb30-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-697"><a href="#cb30-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-698"><a href="#cb30-698" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-699"><a href="#cb30-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-700"><a href="#cb30-700" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Note: Increased Matching Grant and Medicare Continuous Coverage Requirement dollars all count as Federal Medicaid Revenue.</span></span>
<span id="cb30-701"><a href="#cb30-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-702"><a href="#cb30-702" aria-hidden="true" tabindex="-1"></a><span class="fu">## Other Revenue Graphs</span></span>
<span id="cb30-703"><a href="#cb30-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-704"><a href="#cb30-704" aria-hidden="true" tabindex="-1"></a>Sankeyattempt2022.csv file totals \$32 billion flowing into the state. \$3.5 came in FY20, \$12 billion came in FY21 and \$16.1 billion in FY22.</span>
<span id="cb30-705"><a href="#cb30-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-706"><a href="#cb30-706" aria-hidden="true" tabindex="-1"></a>These observations are based more on the IOC revenue data for revenue received instead of the covidmoneytracker.org data for revenue committed.</span>
<span id="cb30-707"><a href="#cb30-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-708"><a href="#cb30-708" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold' }</span></span>
<span id="cb30-709"><a href="#cb30-709" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>)</span>
<span id="cb30-710"><a href="#cb30-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-711"><a href="#cb30-711" aria-hidden="true" tabindex="-1"></a>sankeydata2 <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb30-712"><a href="#cb30-712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-713"><a href="#cb30-713" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>,<span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb30-714"><a href="#cb30-714" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb30-715"><a href="#cb30-715" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Development"</span>, <span class="st">"Transit"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>)),</span>
<span id="cb30-716"><a href="#cb30-716" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"CARES"</span>, <span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>, <span class="st">"Other *"</span>)))</span>
<span id="cb30-717"><a href="#cb30-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-718"><a href="#cb30-718" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="ot">&lt;-</span> sankeydata2</span>
<span id="cb30-719"><a href="#cb30-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-720"><a href="#cb30-720" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey4, </span>
<span id="cb30-721"><a href="#cb30-721" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, </span>
<span id="cb30-722"><a href="#cb30-722" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis3 =</span> Federal, <span class="at">axis2 =</span> StateFunds, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-723"><a href="#cb30-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Notes), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-724"><a href="#cb30-724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-725"><a href="#cb30-725" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-726"><a href="#cb30-726" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-727"><a href="#cb30-727" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-728"><a href="#cb30-728" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb30-729"><a href="#cb30-729" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-730"><a href="#cb30-730" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"$32 billion recieved according to IOC Revenue data"</span>)</span>
<span id="cb30-731"><a href="#cb30-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-732"><a href="#cb30-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-733"><a href="#cb30-733" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-734"><a href="#cb30-734" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey4, </span>
<span id="cb30-735"><a href="#cb30-735" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> Federal, <span class="at">axis2 =</span> StateFunds, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-736"><a href="#cb30-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Notes), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-737"><a href="#cb30-737" aria-hidden="true" tabindex="-1"></a> <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-738"><a href="#cb30-738" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-739"><a href="#cb30-739" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-740"><a href="#cb30-740" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-741"><a href="#cb30-741" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb30-742"><a href="#cb30-742" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    geom_text_repel(stat = "stratum", aes(label = after_stat(stratum)), size = 4)</span></span>
<span id="cb30-743"><a href="#cb30-743" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">""</span>)</span>
<span id="cb30-744"><a href="#cb30-744" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-745"><a href="#cb30-745" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-746"><a href="#cb30-746" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-747"><a href="#cb30-747" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-748"><a href="#cb30-748" aria-hidden="true" tabindex="-1"></a><span class="co"># sankey4 &lt;- sankeydata %&gt;% select(Federal, StateFunds, StFund, Expenditures, value, Notes) %&gt;%</span></span>
<span id="cb30-749"><a href="#cb30-749" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(StFund == "Total") %&gt;%</span></span>
<span id="cb30-750"><a href="#cb30-750" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(StateFunds = factor(StateFunds, levels = c("Total_received_fy21", "Total_received_fy22")),</span></span>
<span id="cb30-751"><a href="#cb30-751" aria-hidden="true" tabindex="-1"></a><span class="co">#                   Federal = as.factor(Federal),</span></span>
<span id="cb30-752"><a href="#cb30-752" aria-hidden="true" tabindex="-1"></a><span class="co">#                   Expenditures = as.factor(Expenditures) )</span></span>
<span id="cb30-753"><a href="#cb30-753" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-754"><a href="#cb30-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-755"><a href="#cb30-755" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-756"><a href="#cb30-756" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="co">#group_by(StateFunds) %&gt;% </span></span>
<span id="cb30-757"><a href="#cb30-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-758"><a href="#cb30-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-759"><a href="#cb30-759" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds) <span class="sc">%&gt;%</span> </span>
<span id="cb30-760"><a href="#cb30-760" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-761"><a href="#cb30-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-762"><a href="#cb30-762" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-763"><a href="#cb30-763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-764"><a href="#cb30-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-765"><a href="#cb30-765" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Notes) <span class="sc">%&gt;%</span> </span>
<span id="cb30-766"><a href="#cb30-766" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-767"><a href="#cb30-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-768"><a href="#cb30-768" aria-hidden="true" tabindex="-1"></a>sankey4 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds, Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-769"><a href="#cb30-769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-770"><a href="#cb30-770" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-771"><a href="#cb30-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-772"><a href="#cb30-772" aria-hidden="true" tabindex="-1"></a>Graph below shows same amount in federal COVID dollars but here color indicates the fund that the money was received in</span>
<span id="cb30-773"><a href="#cb30-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-774"><a href="#cb30-774" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-775"><a href="#cb30-775" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>)</span>
<span id="cb30-776"><a href="#cb30-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-777"><a href="#cb30-777" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb30-778"><a href="#cb30-778" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>, <span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb30-779"><a href="#cb30-779" aria-hidden="true" tabindex="-1"></a>         <span class="at">stfundname =</span> <span class="fu">as.factor</span>(stfundname),</span>
<span id="cb30-780"><a href="#cb30-780" aria-hidden="true" tabindex="-1"></a>         <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb30-781"><a href="#cb30-781" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb30-782"><a href="#cb30-782" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Transit"</span>, <span class="st">"Medicaid"</span>, <span class="st">"Public Health"</span>,  <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>, <span class="st">"Community Development"</span>)),</span>
<span id="cb30-783"><a href="#cb30-783" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>( <span class="st">"Other *"</span>, <span class="st">"CARES"</span>,<span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)))</span>
<span id="cb30-784"><a href="#cb30-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-785"><a href="#cb30-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-786"><a href="#cb30-786" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-787"><a href="#cb30-787" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> Federal, <span class="at">axis2 =</span> stfundname, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-788"><a href="#cb30-788" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>,<span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-789"><a href="#cb30-789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>   </span>
<span id="cb30-790"><a href="#cb30-790" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-791"><a href="#cb30-791" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-792"><a href="#cb30-792" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-793"><a href="#cb30-793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span>  </span>
<span id="cb30-794"><a href="#cb30-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb30-795"><a href="#cb30-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-796"><a href="#cb30-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-797"><a href="#cb30-797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Expenditures using Federal Relief Funds"</span>)</span>
<span id="cb30-798"><a href="#cb30-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-799"><a href="#cb30-799" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-800"><a href="#cb30-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-801"><a href="#cb30-801" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb30-802"><a href="#cb30-802" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total_spent"</span>)</span>
<span id="cb30-803"><a href="#cb30-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-804"><a href="#cb30-804" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-805"><a href="#cb30-805" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> StateFunds, <span class="at">axis2 =</span> stfundname, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-806"><a href="#cb30-806" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-807"><a href="#cb30-807" aria-hidden="true" tabindex="-1"></a>  <span class="co"># guides(fill = FALSE) +   </span></span>
<span id="cb30-808"><a href="#cb30-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-809"><a href="#cb30-809" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_text(stat = "stratum", label.strata = TRUE) + </span></span>
<span id="cb30-810"><a href="#cb30-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-811"><a href="#cb30-811" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-812"><a href="#cb30-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-813"><a href="#cb30-813" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_x_discrete</span>( <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"Federal Funds"</span>, <span class="st">"State Funds"</span>, <span class="st">"Expenditure Categories"</span>) )<span class="sc">+</span> </span>
<span id="cb30-814"><a href="#cb30-814" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb30-815"><a href="#cb30-815" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">""</span>)</span>
<span id="cb30-816"><a href="#cb30-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-817"><a href="#cb30-817" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-818"><a href="#cb30-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-819"><a href="#cb30-819" aria-hidden="true" tabindex="-1"></a>Highlights legislation, fund money went into, and its purpose.</span>
<span id="cb30-820"><a href="#cb30-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-821"><a href="#cb30-821" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-822"><a href="#cb30-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-823"><a href="#cb30-823" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(sankey, </span></span>
<span id="cb30-824"><a href="#cb30-824" aria-hidden="true" tabindex="-1"></a><span class="co">#        aes(y = value, axis3 = Notes, axis2 = stfundname, axis1=Expenditures, label = "stratum")) +</span></span>
<span id="cb30-825"><a href="#cb30-825" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_flow(aes(fill = stfundname), color = "black",reverse=FALSE) +</span></span>
<span id="cb30-826"><a href="#cb30-826" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_stratum(reverse=FALSE)+</span></span>
<span id="cb30-827"><a href="#cb30-827" aria-hidden="true" tabindex="-1"></a><span class="co"># coord_flip()+</span></span>
<span id="cb30-828"><a href="#cb30-828" aria-hidden="true" tabindex="-1"></a><span class="co">#    scale_fill_brewer(palette = "YlOrRd", direction = -1)+</span></span>
<span id="cb30-829"><a href="#cb30-829" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_void() +</span></span>
<span id="cb30-830"><a href="#cb30-830" aria-hidden="true" tabindex="-1"></a><span class="co"># theme(legend.position="bottom") +</span></span>
<span id="cb30-831"><a href="#cb30-831" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle("No labels")</span></span>
<span id="cb30-832"><a href="#cb30-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-833"><a href="#cb30-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-834"><a href="#cb30-834" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-835"><a href="#cb30-835" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">axis3 =</span> Notes, <span class="at">axis2 =</span> stfundname, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-836"><a href="#cb30-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-837"><a href="#cb30-837" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-838"><a href="#cb30-838" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-839"><a href="#cb30-839" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-840"><a href="#cb30-840" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-841"><a href="#cb30-841" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb30-842"><a href="#cb30-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-843"><a href="#cb30-843" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>,<span class="at">reverse=</span><span class="cn">FALSE</span>)</span>
<span id="cb30-844"><a href="#cb30-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-845"><a href="#cb30-845" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-846"><a href="#cb30-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-849"><a href="#cb30-849" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb30-850"><a href="#cb30-850" aria-hidden="true" tabindex="-1"></a>sankeydata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"sankeyattempt2022.csv"</span>)</span>
<span id="cb30-851"><a href="#cb30-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-852"><a href="#cb30-852" aria-hidden="true" tabindex="-1"></a>sankey <span class="ot">&lt;-</span> sankeydata <span class="sc">%&gt;%</span> <span class="fu">select</span>(Federal, StateFunds, StFund, Expenditures, stfundname, value, Notes) <span class="sc">%&gt;%</span></span>
<span id="cb30-853"><a href="#cb30-853" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(StFund <span class="sc">==</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-854"><a href="#cb30-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-855"><a href="#cb30-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StateFunds =</span> <span class="fu">factor</span>(StateFunds, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Total_received_fy20"</span>, <span class="st">"Total_received_fy21"</span>, <span class="st">"Total_received_fy22"</span>)),</span>
<span id="cb30-856"><a href="#cb30-856" aria-hidden="true" tabindex="-1"></a>         <span class="at">stfundname =</span> <span class="fu">as.factor</span>(stfundname),</span>
<span id="cb30-857"><a href="#cb30-857" aria-hidden="true" tabindex="-1"></a>         <span class="at">Federal =</span> <span class="fu">as.factor</span>(Federal),</span>
<span id="cb30-858"><a href="#cb30-858" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb30-859"><a href="#cb30-859" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Expenditures =</span> <span class="fu">factor</span>(Expenditures, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Community Development"</span>, <span class="st">"Public Health"</span>, <span class="st">"Medicaid"</span>, <span class="st">"K-12"</span>, <span class="st">"Federal Other"</span>, <span class="st">"Transit"</span>)),</span>
<span id="cb30-860"><a href="#cb30-860" aria-hidden="true" tabindex="-1"></a>         <span class="at">Notes =</span> <span class="fu">factor</span>(Notes, <span class="at">levels =</span> <span class="fu">c</span>(  <span class="st">"CARES"</span>, <span class="st">"Other *"</span>,<span class="st">"CRRSA"</span>, <span class="st">"ARPA"</span>)))</span>
<span id="cb30-861"><a href="#cb30-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-862"><a href="#cb30-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-863"><a href="#cb30-863" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sankey, </span>
<span id="cb30-864"><a href="#cb30-864" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> value, </span>
<span id="cb30-865"><a href="#cb30-865" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis3 =</span> Notes, <span class="at">axis2 =</span> StateFunds, <span class="at">axis1=</span>Expenditures, <span class="at">label =</span> <span class="st">"stratum"</span>)) <span class="sc">+</span></span>
<span id="cb30-866"><a href="#cb30-866" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_flow</span>(<span class="fu">aes</span>(<span class="at">fill =</span> stfundname), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">reverse=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-867"><a href="#cb30-867" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">reverse=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-868"><a href="#cb30-868" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb30-869"><a href="#cb30-869" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"YlOrRd"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb30-870"><a href="#cb30-870" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb30-871"><a href="#cb30-871" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb30-872"><a href="#cb30-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-873"><a href="#cb30-873" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)), <span class="at">size =</span> <span class="dv">2</span>, <span class="at">reverse =</span> <span class="cn">FALSE</span>)</span>
<span id="cb30-874"><a href="#cb30-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-875"><a href="#cb30-875" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-876"><a href="#cb30-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-877"><a href="#cb30-877" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Note: CARES funds were originally received and spent in Disaster Response &amp; Recovery Fund. In FY22, unspent aid was transferred to the State CURE and then transferred again to state agencies for COVID-related expenditures. Remaining CARES funds were transferred to State CURE fund for FY22. \$337 million was also transferred from the Illinois Department of Revenue into the Illinois Housing Development Authority (IHDA). (</span><span class="co">[</span><span class="ot">LBOC June 2021 Report</span><span class="co">](https://budget.illinois.gov/content/dam/soi/en/web/budget/documents/lboc/lboc-report-june-2021-final.pdf)</span><span class="at">)</span></span>
<span id="cb30-878"><a href="#cb30-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-879"><a href="#cb30-879" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Revenue from Local Cure is the Local Government Transfers. A small amount of the State CURE was also transferred to local governments (\$371 million in FY2021 ..... ??? ).</span></span>
<span id="cb30-880"><a href="#cb30-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-881"><a href="#cb30-881" aria-hidden="true" tabindex="-1"></a><span class="in">```{r results='hold'}</span></span>
<span id="cb30-882"><a href="#cb30-882" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span></span>
<span id="cb30-883"><a href="#cb30-883" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-884"><a href="#cb30-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-885"><a href="#cb30-885" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds) <span class="sc">%&gt;%</span> </span>
<span id="cb30-886"><a href="#cb30-886" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-887"><a href="#cb30-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-888"><a href="#cb30-888" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-889"><a href="#cb30-889" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-890"><a href="#cb30-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-891"><a href="#cb30-891" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Notes) <span class="sc">%&gt;%</span> </span>
<span id="cb30-892"><a href="#cb30-892" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-893"><a href="#cb30-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-894"><a href="#cb30-894" aria-hidden="true" tabindex="-1"></a>sankey <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(StateFunds, Expenditures) <span class="sc">%&gt;%</span> </span>
<span id="cb30-895"><a href="#cb30-895" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum=</span><span class="fu">sum</span>(value))</span>
<span id="cb30-896"><a href="#cb30-896" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-897"><a href="#cb30-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-898"><a href="#cb30-898" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">ggsankey info and example</span><span class="co">](https://cheatography.com/seleven/cheat-sheets/ggalluvial/)</span></span>
<span id="cb30-899"><a href="#cb30-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-900"><a href="#cb30-900" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/image-2109120559.png)</span>{width="346"}</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>