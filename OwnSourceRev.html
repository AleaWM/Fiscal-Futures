<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Methodology for the Fiscal Futures Annual Report - 3&nbsp; Own Source Revenue</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./FederalRevenue.html" rel="next">
<link href="./Everything_changepensions.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Methodology for the Fiscal Futures Annual Report</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-methodology" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Methodology</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-methodology">    
        <li>
    <a class="dropdown-item" href="./FundsIncluded.html">
 <span class="dropdown-text">An All Funds Approach</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./code-cleaning.html">
 <span class="dropdown-text">Gathering and Cleaning Data!</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Everything.html">
 <span class="dropdown-text">Calculating the Fiscal Gap</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/AleaWM/Fiscal-Futures/tree/main/data"> 
<span class="menu-text">Data</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://github.com/AleaWM/Fiscal-Futures/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./OwnSourceRev.html">Illinois State Budget Data</a></li><li class="breadcrumb-item"><a href="./OwnSourceRev.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Own Source Revenue</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Background Information</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Reports</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Everything.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Calculating the Fiscal Gap</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Everything_changepensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pension Costs Included within Department Expenditures</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Illinois State Budget Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./OwnSourceRev.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Own Source Revenue</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FederalRevenue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Federal Revenue</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LocalTransfers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Local Transfers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Medicaid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Medicaid</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Debt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Debt Service Discussion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Pensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Pensions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Healthcare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">State Employee Healthcare Discussion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TaxRefunds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tax Refunds</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./K12_Education.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">K-12 Spending &amp; ESSER Funds</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FedMoneyReceived.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Federal COVID Money Received</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Methodology</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FundsIncluded.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">An All Funds Approach</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Gathering and Cleaning Data!</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./past-mistakes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Past Report Corrections</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#income-taxes" id="toc-income-taxes" class="nav-link active" data-scroll-target="#income-taxes"><span class="header-section-number">3.1</span> Income Taxes</a></li>
  <li><a href="#sales-tax" id="toc-sales-tax" class="nav-link" data-scroll-target="#sales-tax"><span class="header-section-number">3.2</span> Sales Tax</a>
  <ul class="collapse">
  <li><a href="#online-retailers" id="toc-online-retailers" class="nav-link" data-scroll-target="#online-retailers"><span class="header-section-number">3.2.1</span> Online retailers</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./OwnSourceRev.html">Illinois State Budget Data</a></li><li class="breadcrumb-item"><a href="./OwnSourceRev.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Own Source Revenue</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Own Source Revenue</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formatR)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smooth)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geofacet)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cmapplot)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>exp_temp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"./data/exp_temp.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency <span class="sc">!=</span> <span class="st">"799"</span>) </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"./data/rev_temp.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(agency <span class="sc">!=</span> <span class="st">"799"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>current_year <span class="ot">=</span> <span class="dv">2024</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><img src="images/clipboard-434299901.png" class="img-fluid"></p>
<p><img src="images/clipboard-131008373.png" class="img-fluid"></p>
<section id="income-taxes" class="level2 page-columns page-full" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="income-taxes"><span class="header-section-number">3.1</span> Income Taxes</h2>
<p>Income taxes include Individual income taxes and corporate income taxes.</p>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">if_else</span>(fy <span class="sc">==</span> <span class="fu">max</span>(fy), <span class="fu">as.character</span>(source_name_AWM), <span class="cn">NA_character_</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM, label) <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label)) <span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span> ,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="st">"cm"</span>)) <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Income Tax by Revenue Source"</span>, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)  <span class="sc">+</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">'off'</span>, <span class="at">expand =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">if_else</span>(fy <span class="sc">==</span> <span class="fu">max</span>(fy), <span class="fu">as.character</span>(fund_name_ab), <span class="cn">NA_character_</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab, label) <span class="sc">%&gt;%</span> </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label),   </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>              <span class="at">hjust =</span> <span class="dv">0</span>, </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            <span class="at">direction =</span> <span class="st">"y"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>              <span class="at">segment.linetype =</span> <span class="st">"dotted"</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlim =</span> <span class="fu">c</span>(current_year <span class="sc">+</span> .<span class="dv">5</span>, <span class="cn">NA</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="st">"cm"</span>)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">'off'</span>) <span class="sc">+</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Income Tax Money by Receiving Fund"</span>, </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-combined-incometaxes-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-combined-incometaxes-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Break down of ALL Income Tax
</figcaption>
<div aria-describedby="fig-combined-incometaxes-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-combined-incometaxes-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-combined-incometaxes-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-combined-incometaxes-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.2: Break down of ALL Income Tax
</figcaption>
<div aria-describedby="fig-combined-incometaxes-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-combined-incometaxes-2.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
</div>
<section id="individual-income-tax" class="level4 page-columns page-full" data-number="3.1.0.1">
<h4 data-number="3.1.0.1" class="anchored" data-anchor-id="individual-income-tax"><span class="header-section-number">3.1.0.1</span> Individual Income Tax</h4>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  scale_x_continuous(expand = c(0,0)) +</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Individual Income Tax  Breakdown"</span>, <span class="at">subtitle =</span> <span class="st">"Revenue sources for rev_type == 02"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a> <span class="co"># scale_x_continuous(expand = c(0,0)) +</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Individual Income Tax  Breakdown"</span>, </span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Funds receiving rev_type == 02"</span>,</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-incometax-pprt-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-incometax-pprt-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.3: Break down of Individual Income Tax
</figcaption>
<div aria-describedby="fig-incometax-pprt-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-incometax-pprt-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-incometax-pprt-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-incometax-pprt-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.4: Break down of Individual Income Tax
</figcaption>
<div aria-describedby="fig-incometax-pprt-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-incometax-pprt-2.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="corporate-income-tax" class="level4 page-columns page-full" data-number="3.1.0.2">
<h4 data-number="3.1.0.2" class="anchored" data-anchor-id="corporate-income-tax"><span class="header-section-number">3.1.0.2</span> Corporate Income Tax</h4>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Corporate Income Tax  Breakdown"</span>, </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Corporate Income Taxes include money transfered straight to local governments and funds saved for tax refunds."</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Corporate Income Tax Breakdown"</span>, </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Corporate Income Taxes include money transfered straight to local governments and funds saved for tax refunds."</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-corpinctax-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-corpinctax-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.5: Break down of Corporte Income Tax
</figcaption>
<div aria-describedby="fig-corpinctax-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-corpinctax-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-corpinctax-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-corpinctax-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.6: Break down of Corporte Income Tax
</figcaption>
<div aria-describedby="fig-corpinctax-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-corpinctax-2.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="pprt" class="level4" data-number="3.1.0.3">
<h4 data-number="3.1.0.3" class="anchored" data-anchor-id="pprt"><span class="header-section-number">3.1.0.3</span> PPRT</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    source_name_AWM <span class="sc">!=</span> <span class="st">"PERS PROP REPL TAX AMNESTY"</span> <span class="sc">&amp;</span> (</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>          source_name_AWM  <span class="sc">==</span> <span class="st">"INDIV. INCOME TAX PASS-THROUGH"</span> <span class="sc">|</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    source_name <span class="sc">==</span> <span class="st">"CORPORATE"</span> <span class="sc">|</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>         source_name <span class="sc">==</span> <span class="st">"PERS PROP REPLACE"</span> <span class="sc">|</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>           source_name <span class="sc">==</span> <span class="st">"PPRT-PERSON PROP TAX REPLACE"</span><span class="co">#|</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>          <span class="co"># fund_name_ab == "PERSONAL PROPERTY TAX REPLACE" </span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">rev =</span> <span class="fu">sum</span>(receipts)) <span class="sc">|&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y =</span> rev, <span class="at">fill =</span> source_name_AWM), <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    source_name_AWM <span class="sc">!=</span> <span class="st">"PERS PROP REPL TAX AMNESTY"</span> <span class="sc">&amp;</span> (</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>          source_name_AWM  <span class="sc">==</span> <span class="st">"INDIV. INCOME TAX PASS-THROUGH"</span> <span class="sc">|</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    source_name <span class="sc">==</span> <span class="st">"CORPORATE"</span> <span class="sc">|</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>         source_name <span class="sc">==</span> <span class="st">"PERS PROP REPLACE"</span> <span class="sc">|</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>           source_name <span class="sc">==</span> <span class="st">"PPRT-PERSON PROP TAX REPLACE"</span><span class="co">#|</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>          <span class="co"># fund_name_ab == "PERSONAL PROPERTY TAX REPLACE" </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">rev =</span> <span class="fu">sum</span>(receipts)) <span class="sc">|&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y =</span> rev, <span class="at">fill =</span> fund_name_ab), <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sales-tax" class="level2 page-columns page-full" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="sales-tax"><span class="header-section-number">3.2</span> Sales Tax</h2>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">round</span>(<span class="fu">sum</span>(receipts))) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from =</span> <span class="st">"receipts"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>   <span class="co"># theme(legend.position = "none") +</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sales Tax Breakdown"</span>, </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> <span class="sc">&amp;</span> fy <span class="sc">&gt;</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text(data = annotation, aes(x=x, y=y, label=label)) +</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a> <span class="co"># scale_linetype_manual(values = c("dotted", "dashed", "solid")) +</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  theme(legend.position = "none") +</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sales Tax Breakdown"</span>, </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>       <span class="co">#subtitle = "Sales Taxes include money transfered straight to local governments and funds saved for tax refunds.",</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell column-page quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-salestax-pprt-1" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-salestax-pprt-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.7: Break down of Sales Tax. Sales Taxes include money transfered straight to local governments and funds saved for tax refunds.
</figcaption>
<div aria-describedby="fig-salestax-pprt-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div data-pagedtable="false">
<script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["source"],"name":[1],"type":["chr"],"align":["left"]},{"label":["source_name_AWM"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["2019"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["2020"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["2021"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["2022"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["2023"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["2024"],"name":[29],"type":["dbl"],"align":["right"]}],"data":[{"1":"0034","2":"AUTO RENT TAX/MUNICIPALITY","3":"4734466","4":"5337557","5":"5627081","6":"5659399","7":"5194224","8":"4972241","9":"5302757","10":"5166192","11":"5497883","12":"5925530","13":"6185049","14":"5681106","15":"5381018","16":"5721932","17":"5903019","18":"6291289","19":"6159827","20":"6751182","21":"7032359","22":"7044631","23":"7109727","24":"7754661","25":"6636149","26":"5118595","27":"7670761","28":"9241213","29":"9023556"},{"1":"0035","2":"AUTO RENT TAX/MPEA","3":"22617269","4":"24379280","5":"25414516","6":"27586615","7":"24275931","8":"22164764","9":"21768486","10":"24350322","11":"25611579","12":"30913489","13":"30876353","14":"27012181","15":"25507326","16":"26453429","17":"28719580","18":"30633516","19":"31656069","20":"32582650","21":"33163382","22":"33225400","23":"34443503","24":"32674638","25":"31449638","26":"22060313","27":"35889126","28":"44159779","29":"43152179"},{"1":"0036","2":"AUTO RENTING TAX-STATE","3":"26163957","4":"29698849","5":"31429079","6":"31271436","7":"28789557","8":"26464172","9":"28512520","10":"28050693","11":"28897722","12":"30856657","13":"32692580","14":"30826263","15":"28866425","16":"33587557","17":"34048792","18":"35658382","19":"37886358","20":"39316373","21":"40437766","22":"40608447","23":"39917672","24":"44772350","25":"39817820","26":"31753841","27":"45026201","28":"54394503","29":"53736109"},{"1":"0058","2":"COUNTY WATER COMM SALES TAX","3":"17727893","4":"20285565","5":"19803161","6":"19699225","7":"20579895","8":"19224885","9":"20205751","10":"21052352","11":"22308833","12":"18311260","13":"21407915","14":"16402489","15":"17748891","16":"16090591","17":"18050048","18":"18161041","19":"19496132","20":"21139958","21":"21768460","22":"1208286","23":"23078","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0059","2":"CO WATER COMM ROT/EXCEL","3":"11844749","4":"12517316","5":"14301139","6":"14185069","7":"12855762","8":"12339883","9":"12872644","10":"13586470","11":"15064256","12":"13426261","13":"15380023","14":"13139615","15":"12231103","16":"12491417","17":"14093450","18":"14317529","19":"15240211","20":"15669479","21":"15371278","22":"294380","23":"61","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0313","2":"METRO EAST-SALES TAX","3":"12496585","4":"12069080","5":"13047732","6":"13281838","7":"14095373","8":"14800941","9":"15772296","10":"16644122","11":"15873921","12":"16481074","13":"19267530","14":"15174908","15":"16103360","16":"16837514","17":"16825077","18":"16619573","19":"14614581","20":"17261424","21":"17031085","22":"15514002","23":"33545859","24":"32583336","25":"31802512","26":"35905334","27":"40346620","28":"42587820","29":"43585322"},{"1":"0314","2":"METRO EAST-SALES TAX/EXCEL","3":"7768286","4":"9380521","5":"9257737","6":"9264498","7":"9018029","8":"8824468","9":"9217170","10":"9590449","11":"11670940","12":"11540617","13":"12271316","14":"11368197","15":"12533366","16":"12688051","17":"12889187","18":"13098850","19":"12841306","20":"12711790","21":"13510196","22":"15335163","23":"191215","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0408","2":"RTA PUBLIC TRANS TAX","3":"10692","4":"NA","5":"12552","6":"42872","7":"2","8":"151144","9":"NA","10":"NA","11":"3366","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0410","2":"RTA SALES TAX","3":"254600308","4":"269925734","5":"292996567","6":"297133235","7":"324852416","8":"322692578","9":"328709317","10":"335453025","11":"353660613","12":"349430061","13":"396823899","14":"504717356","15":"509929344","16":"529452478","17":"537684609","18":"546595063","19":"577736429","20":"623474058","21":"648678000","22":"674014557","23":"1228404378","24":"1192787289","25":"1164707483","26":"1220595021","27":"1516026077","28":"1588881553","29":"1646539507"},{"1":"0411","2":"SALES TAX-QUARTERLY/MONTHLY","3":"192775092","4":"200530654","5":"209380876","6":"207759058","7":"194170625","8":"197080438","9":"207420749","10":"215385508","11":"238812756","12":"250419648","13":"284444494","14":"398322821","15":"352063300","16":"396218433","17":"409441265","18":"433374690","19":"460194332","20":"480602456","21":"481000647","22":"503685281","23":"6708501","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0412","2":"COOK COUNTY PROTEST","3":"779","4":"NA","5":"NA","6":"22101","7":"199","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0474","2":"HOME RULE MUNICI SALES TAX","3":"189220272","4":"208253579","5":"219828429","6":"225334449","7":"248490442","8":"271827833","9":"299452223","10":"334956351","11":"386145200","12":"458864701","13":"439769480","14":"406639603","15":"411604664","16":"442688915","17":"434909744","18":"475646610","19":"509190910","20":"550638032","21":"555225943","22":"542157668","23":"1086589520","24":"1078089041","25":"1059055840","26":"1024413848","27":"1405670573","28":"1484546444","29":"1500412331"},{"1":"0475","2":"METROPO PIER & EXPO AUTH.","3":"10654831","4":"11272612","5":"12393345","6":"13721668","7":"13826657","8":"15137544","9":"15883985","10":"18105543","11":"16673224","12":"17902971","13":"20594378","14":"17525598","15":"19465513","16":"34056247","17":"37851684","18":"41920339","19":"42214156","20":"47169450","21":"49183482","22":"50857533","23":"53024807","24":"55034426","25":"45437824","26":"21638441","27":"47723730","28":"57729439","29":"60159698"},{"1":"0476","2":"COUNTY HOME RULE SALES TAX","3":"148870489","4":"156205874","5":"164748081","6":"170629568","7":"174019932","8":"178009999","9":"185827023","10":"188164574","11":"200381388","12":"199399173","13":"203483477","14":"401054101","15":"395663427","16":"305705587","17":"295812383","18":"177524521","19":"192842563","20":"189944553","21":"292538790","22":"419090741","23":"894398173","24":"791467568","25":"808123968","26":"699304606","27":"1059230347","28":"1116210001","29":"1116721059"},{"1":"0477","2":"NON-HOME RULE MUNI SALES TAX","3":"232560","4":"1613636","5":"1593729","6":"1597235","7":"2254846","8":"6616494","9":"11234768","10":"16800181","11":"13174920","12":"26100060","13":"48036171","14":"49278655","15":"48839232","16":"52335270","17":"58899996","18":"63173851","19":"64334116","20":"69736709","21":"69666247","22":"63772357","23":"142413544","24":"150024856","25":"148825587","26":"167922735","27":"211327746","28":"222529927","29":"223621654"},{"1":"0478","2":"NON-HOME RULE R O T-EXCEL","3":"197538","4":"1058220","5":"1153793","6":"1150141","7":"1080601","8":"1088813","9":"4159002","10":"5988343","11":"17925873","12":"25707853","13":"40366028","14":"40203408","15":"40519977","16":"42279408","17":"45270936","18":"48746564","19":"49737400","20":"51383708","21":"57016622","22":"64978629","23":"713256","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0479","2":"HOME RULE MUNI R O T-EXCEL","3":"134415366","4":"144863067","5":"168256094","6":"174509078","7":"161392442","8":"187737997","9":"191357434","10":"229593478","11":"247244780","12":"295821839","13":"325553159","14":"308171793","15":"298675791","16":"348698486","17":"377867201","18":"387917793","19":"399277406","20":"407722964","21":"432070938","22":"479249175","23":"6701158","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0480","2":"CO HOME RULE SALES TAX-EXCEL","3":"108849826","4":"105827024","5":"113221003","6":"111947034","7":"105099578","8":"104524687","9":"107930332","10":"113886586","11":"126273907","12":"132906820","13":"135875995","14":"268568470","15":"265262074","16":"248740980","17":"226560669","18":"163306154","19":"148566239","20":"143667076","21":"231540800","22":"355819381","23":"6218605","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0481","2":"ST RETAILER'S OCCUPATION TAX","3":"3926166918","4":"4233581633","5":"4577932772","6":"4570836705","7":"4894141722","8":"4812163455","9":"5016876646","10":"5233143112","11":"5520181484","12":"5473166011","13":"5599935377","14":"5144994845","15":"4990441108","16":"5054914836","17":"5267936339","18":"5334122896","19":"5611538677","20":"5992133322","21":"6183866168","22":"6354498359","23":"11168549650","24":"11933687094","25":"11742238991","26":"13248519027","27":"14679765671","28":"15378788374","29":"15578366159"},{"1":"0482","2":"STATE ROT-2.2%","3":"119619052","4":"129654562","5":"139711068","6":"139012009","7":"149201782","8":"147133816","9":"152053800","10":"159124754","11":"168572334","12":"165303109","13":"167120450","14":"155354795","15":"150058006","16":"150753311","17":"158299820","18":"160105245","19":"168534506","20":"179848297","21":"183747953","22":"188311409","23":"329158455","24":"357983627","25":"350026282","26":"395413497","27":"441203043","28":"465602177","29":"470909426"},{"1":"0483","2":"STATE ROT QUARTERLY/MONTHLY","3":"2962954935","4":"3089035107","5":"3297150859","6":"3283246846","7":"3051922929","8":"3090575702","9":"3145026767","10":"3356232166","11":"3709662860","12":"3911125874","13":"3998910651","14":"3815987460","15":"3449640286","16":"3819535046","17":"4075002402","18":"4231661619","19":"4366819387","20":"4448067393","21":"4509262245","22":"4464947657","23":"85470270","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0484","2":"STATE ROT QTRLY/MNTLY 2.2%","3":"90199421","4":"93675361","5":"100490973","6":"99136277","7":"92351884","8":"93662847","9":"94527315","10":"101800616","11":"112875702","12":"118105273","13":"119849515","14":"114610827","15":"101784925","16":"111517091","17":"120520504","18":"124219022","19":"128669039","20":"131704009","21":"133360832","22":"131319544","23":"2774231","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0485","2":"STATE ROT-PREPAID","3":"19806608","4":"23752378","5":"18578297","6":"22353844","7":"28227855","8":"21111864","9":"62198833","10":"34300677","11":"26539137","12":"25579303","13":"26496161","14":"36868008","15":"48991391","16":"89773381","17":"167674831","18":"32059771","19":"38777081","20":"37956844","21":"24168630","22":"26352154","23":"3521","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0486","2":"SALES ROT-PREPAID 2.2%","3":"782108","4":"938244","5":"733591","6":"883000","7":"1115030","8":"833941","9":"2456919","10":"1354912","11":"1048324","12":"1010409","13":"1046626","14":"1456325","15":"1935211","16":"3542938","17":"6623330","18":"1266397","19":"1531735","20":"1499335","21":"947271","22":"679831","23":"81","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0487","2":"ST ROT PREPAID-QUARTER/MONTH","3":"51876971","4":"45386332","5":"50667284","6":"28330078","7":"33806391","8":"45245235","9":"57388920","10":"96304638","11":"97278359","12":"87403432","13":"83799292","14":"69724350","15":"62811140","16":"78581016","17":"155710439","18":"283468807","19":"259438026","20":"248969752","21":"187376384","22":"157153290","23":"3036519","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0488","2":"ROT PREPAID-QUARTER/MONTH 2.2%","3":"2049194","4":"1792807","5":"2001410","6":"1119068","7":"1335388","8":"1787234","9":"2266922","10":"3804133","11":"3842596","12":"3452526","13":"3310159","14":"2754184","15":"2481105","16":"3107236","17":"6150724","18":"11197313","19":"10248072","20":"9834564","21":"7099262","22":"3591123","23":"69498","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"0489","2":"HOME RULE MUNICI SOFT DRINK","3":"6815041","4":"7520303","5":"7923883","6":"8003602","7":"8034471","8":"8246220","9":"8191656","10":"7953432","11":"8331420","12":"8460048","13":"8860138","14":"8525787","15":"8667145","16":"9123569","17":"9603761","18":"9991186","19":"9190117","20":"9461787","21":"9762054","22":"10052926","23":"8863183","24":"10938868","25":"10228690","26":"7942280","27":"10474007","28":"12205964","29":"14292478"},{"1":"1331","2":"HOME RULE MUNI SALES TAX","3":"25368","4":"103","5":"NA","6":"NA","7":"796","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1421","2":"COUNTY PUBLIC SAFETY R.O.T.","3":"925876","4":"3021642","5":"8012696","6":"10637127","7":"13007537","8":"18201862","9":"37533243","10":"41746590","11":"40207276","12":"43115552","13":"45900680","14":"44480155","15":"43024579","16":"48203239","17":"48590234","18":"48892112","19":"50130075","20":"49007231","21":"51110410","22":"44959798","23":"102248442","24":"103413909","25":"101771779","26":"133534961","27":"159275304","28":"170840260","29":"174469591"},{"1":"1422","2":"CTY PUBLIC SAFETY--ACCELERATED","3":"590269","4":"2481184","5":"5559781","6":"8922928","7":"7614483","8":"7335185","9":"14529521","10":"18961374","11":"26332395","12":"31120312","13":"36187501","14":"32624187","15":"32713073","16":"37537044","17":"37314447","18":"38556514","19":"38774290","20":"38488996","21":"42085684","22":"46271164","23":"543756","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1676","2":"METRO EAST PARK REG","3":"NA","4":"NA","5":"NA","6":"NA","7":"2246055","8":"1799172","9":"2294660","10":"2452260","11":"2126375","12":"2388503","13":"2782253","14":"2255661","15":"2333111","16":"2556046","17":"2536968","18":"2489561","19":"2498535","20":"2543616","21":"2403519","22":"2060047","23":"4420814","24":"4819881","25":"4656456","26":"5282497","27":"6267537","28":"6682828","29":"6758087"},{"1":"1677","2":"METRO EAST PARK-EXCEL","3":"NA","4":"NA","5":"NA","6":"NA","7":"1364181","8":"1107322","9":"1429754","10":"1473266","11":"2016782","12":"1873950","13":"1984295","14":"1544933","15":"2037889","16":"1932322","17":"1940753","18":"1963644","19":"1933716","20":"1874629","21":"2029621","22":"2434297","23":"38875","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1901","2":"RETAILERS OCCUP. TAX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"103538276","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"183627055","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1903","2":"AUTO RENTING TAX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"6514","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"24737","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1920","2":"AUTO RENT TAX/MPEA-AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"5572","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"107","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1921","2":"AUTO RENT TAX/MUNI AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"1168","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"3306","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1932","2":"METRO EAST-SALES TAX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"11599","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1933","2":"METRO EAST PK & REC  AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"616","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1934","2":"RTA SALES TAX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"800766","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"1797299","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1936","2":"CNTY PUBLIC SAFETY TAX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"7013","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1938","2":"METRO PIER & EXPO AUTH AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"39503","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1939","2":"CNTY HOME RULE SALES AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"314576","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"1783070","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1940","2":"CO WATER COM SLS TX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"25604","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1941","2":"NON HOME RLE MUNI SLS AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"4084","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"1942","2":"HOME RULE MUNI SLS TX AMNESTY","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"426688","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"1965137","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2017","2":"BUSINESS DISTRICT R.O.T.","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"69135","12":"486565","13":"2736553","14":"6380993","15":"6930746","16":"5892814","17":"6262978","18":"7972298","19":"10196093","20":"10046357","21":"9918584","22":"9219722","23":"24993850","24":"28244686","25":"29242519","26":"38591227","27":"48906267","28":"61661831","29":"71848625"},{"1":"2074","2":"R.O.T.-SPECIFIED AMT. DEFICIEN","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"2141558","12":"NA","13":"NA","14":"NA","15":"2764099","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2152","2":"SCHOOL FACILITY OCCUPATION TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"4556733","15":"11313081","16":"22691424","17":"25144395","18":"29400901","19":"32503535","20":"44571205","21":"43353551","22":"45090890","23":"130278626","24":"139179980","25":"149251263","26":"181354760","27":"208965706","28":"227633460","29":"230941961"},{"1":"2161","2":"ACCELERATED SALES TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"415829","15":"1829940","16":"3628930","17":"4124017","18":"4647403","19":"5912112","20":"6739639","21":"7819568","22":"11266738","23":"160654","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2163","2":"FLOOD PREVENTION OCCUPATION TX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"2316257","15":"11079801","16":"8830062","17":"6795565","18":"6685864","19":"6652749","20":"6800501","21":"5957827","22":"5423836","23":"12027262","24":"12539530","25":"12148214","26":"13800271","27":"16384443","28":"17492443","29":"17730759"},{"1":"2160","2":"SCHOOL FACILITY OCCUP TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"11651","16":"329023","17":"1257602","18":"1007293","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2251","2":"FLOOD PREV OCCUP TX-ACCEL","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"90307","16":"4436054","17":"4958742","18":"5043844","19":"4975104","20":"4841091","21":"5264874","22":"6357206","23":"98555","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2252","2":"SCHOOL FAC OCCUP TX-ACCEL","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"67730","16":"7972891","17":"16361052","18":"19949755","19":"23952047","20":"30985178","21":"38509244","22":"43221451","23":"359212","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"2348","2":"SALES TAX ON SORBENTS","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"2000000","18":"2000000","19":"1245907","20":"1175708","21":"606600","22":"365235","23":"65707","24":"228469","25":"268787","26":"272540","27":"241638","28":"53568","29":"140392"},{"1":"2492","2":"5% SALES TAX CASH RECEIPTS","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"2639940","21":"3161961","22":"2824642","23":"2199516","24":"2589640","25":"2560155","26":"4871968","27":"2303556","28":"3241586","29":"3314287"},{"1":"2458","2":"SALE PRICE PER OZ./CANNABIS","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"463322","22":"1956730","23":"3970658","24":"5891182","25":"14046991","26":"23638556","27":"20867116","28":"23876852","29":"19635872"},{"1":"2558","2":"MED CANNABIS-INC TX SURCHARGE","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"92550","24":"59924","25":"219410","26":"1316364","27":"639848","28":"122598","29":"250079"},{"1":"2621","2":"RENTAL PURCH AGRMNT OCC & USE","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"5418042","24":"13512664","25":"17170679","26":"19274835","27":"20300348","28":"19317196","29":"19936252"},{"1":"2689","2":"STATE CANNABIS EXCISE TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"34711776","26":"176865329","27":"262906674","28":"255527697","29":"261748565"},{"1":"2692","2":"LOCALLY-IMPOSED SALES TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"5152812","26":"2685963","27":"7552007","28":"12474508","29":"8593668"},{"1":"2690","2":"LOCAL CANNABIS EXCISE TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"46648387","27":"72428196","28":"73162590","29":"74874027"},{"1":"0033","2":"AUTO RENTING TAX-COUNTIES","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"219893","29":"226397"},{"1":"2592","2":"UNDERGROUND STORAGE TANK","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"9948676"},{"1":"2775","2":"LOCAL RETAILERS OCCUPATION TAX","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"323876"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-salestax-pprt-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-salestax-pprt-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.8: Break down of Sales Tax. Sales Taxes include money transfered straight to local governments and funds saved for tax refunds.
</figcaption>
<div aria-describedby="fig-salestax-pprt-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-salestax-pprt-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-salestax-pprt-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-salestax-pprt-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.9: Break down of Sales Tax. Sales Taxes include money transfered straight to local governments and funds saved for tax refunds.
</figcaption>
<div aria-describedby="fig-salestax-pprt-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-salestax-pprt-2.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
</div>
<section id="online-retailers" class="level3 page-columns page-full" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="online-retailers"><span class="header-section-number">3.2.1</span> Online retailers</h3>
<div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Online Retailer Warning</strong></p>
<p>Not edited or double checked. Randomly looked into online retailers recently and didn’t finish thoughts on it. Just general notes pulled together while looking into online sales tax.</p>
</div>
</div>
</div>
<p>Law was passed in 2018 that required out of state retailers to pay the 6.25% <strong>state</strong> sales tax. The Rebuild Illinois law expanded the law to require remote retailers to charge all state and local retailers occupation taxes beginning in July 1, 2020. Before Jan.&nbsp;1 2021, only state sales taxes were required to be collected (related to South Dakota v Wayfair court decision). Now required to pay state <strong>and local</strong> tax based on where product is delivered.</p>
<p>“On June 28, 2019, Public Act 101-0031, the”Leveling the Playing Field for Illinois Retail Act,” was signed into Illinois law and on December 13, 2019 an amendment to the Act was signed into law in Public Act 101-0604. In an effort to create more equity between remote sellers and local brick-and-mortar retailers, the new law requires remote sellers without a physical presence in the state and marketplace facilitators (e.g., Amazon and Walmart) to collect both state and local sales taxes effective January 1, 2021.” <a href="https://www.civicfed.org/civic-federation/blog/consumer-taxes-chicago-increases-and-updates-2021">CivicFed.org</a></p>
<p>Requires remote sellers and marketplace facilitators to collect and remit the state and locally-imposed Retailers’ Occupation Tax (ROT) for the jurisdictions where the product is delivered (destination sourcing) rather than collecting and remitting solely the state use tax.&nbsp;<br>
</p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Illinois’ State sales tax rate is 6.25%, of which 5.0% of the sales tax revenue goes to the State, 1.0% goes to all municipalities, including Chicago, and the remaining 0.25% goes to the counties. However, Cook County’s 0.25% share of the State sales tax is distributed to the Regional Transportation Authority.</p>
</div></div><p>“The amended”Leveling the Playing Field for Illinois Retail Act” was passed by the General Assembly on November 14, 2019, to require both Remote Retailers and Marketplace Facilitators to collect and remit the state and locally-imposed Retailers’ Occupation Tax (ROT, aka sales tax) for the jurisdictions where the product is delivered (its destination) starting January 1, 2021.”- <a href="https://www.iml.org/file.cfm?key=16124">Illinois Municipal League</a></p>
<ul>
<li><p>Marketplace Facilitators, like Amazon, were required to collect Use Tax on sales starting January 1, 2020</p></li>
<li><p>Other sellers required to collect state and local sales tax on sales on January 2021.</p></li>
<li><p>There is a <strong>state</strong> tax rate of 6.25% and Illinois municipalities may impose an additional <strong>local</strong> sales tax called the Retailer’s Occupation Tax.</p>
<ul>
<li><p>For remote sellers, the state tax rate is referred to as “use tax” and for intrastate sellers, “ROT” simply means <em>sales tax</em>.&nbsp;&nbsp;</p></li>
<li><p>The ROT is measured upon the seller’s gross receipts and the seller is statutorily <u>required</u> to collect the use tax from their customers.</p></li>
</ul></li>
<li><p>source 0482 is State ROT-2.2%</p></li>
</ul>
<p><a href="https://www.ilga.gov/legislation/ilcs/ilcs5.asp?ActID=3993&amp;ChapterID=8">ILGA info</a> - leveling the playing field went into effect on July 1 2020 which is the beginning of FY21</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## State Retailers Occupation Tax. </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-online-retailers-1" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-online-retailers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.10: Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)
</figcaption>
<div aria-describedby="fig-online-retailers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div data-pagedtable="false">
<script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["fy"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["source_name_AWM"],"name":[2],"type":["chr"],"align":["left"]},{"label":["revenue"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"1998","2":"ST RETAILER'S OCCUPATION TAX","3":"3926166918"},{"1":"1999","2":"ST RETAILER'S OCCUPATION TAX","3":"4233581633"},{"1":"2000","2":"ST RETAILER'S OCCUPATION TAX","3":"4577932772"},{"1":"2001","2":"ST RETAILER'S OCCUPATION TAX","3":"4570836705"},{"1":"2002","2":"ST RETAILER'S OCCUPATION TAX","3":"4894141722"},{"1":"2003","2":"ST RETAILER'S OCCUPATION TAX","3":"4812163455"},{"1":"2004","2":"ST RETAILER'S OCCUPATION TAX","3":"5016876646"},{"1":"2005","2":"ST RETAILER'S OCCUPATION TAX","3":"5233143112"},{"1":"2006","2":"ST RETAILER'S OCCUPATION TAX","3":"5520181484"},{"1":"2007","2":"ST RETAILER'S OCCUPATION TAX","3":"5473166011"},{"1":"2008","2":"ST RETAILER'S OCCUPATION TAX","3":"5599935377"},{"1":"2009","2":"ST RETAILER'S OCCUPATION TAX","3":"5144994845"},{"1":"2010","2":"ST RETAILER'S OCCUPATION TAX","3":"4990441108"},{"1":"2011","2":"ST RETAILER'S OCCUPATION TAX","3":"5054914836"},{"1":"2012","2":"ST RETAILER'S OCCUPATION TAX","3":"5267936339"},{"1":"2013","2":"ST RETAILER'S OCCUPATION TAX","3":"5334122896"},{"1":"2014","2":"ST RETAILER'S OCCUPATION TAX","3":"5611538677"},{"1":"2015","2":"ST RETAILER'S OCCUPATION TAX","3":"5992133322"},{"1":"2016","2":"ST RETAILER'S OCCUPATION TAX","3":"6183866168"},{"1":"2017","2":"ST RETAILER'S OCCUPATION TAX","3":"6354498359"},{"1":"2018","2":"ST RETAILER'S OCCUPATION TAX","3":"11168549650"},{"1":"2019","2":"ST RETAILER'S OCCUPATION TAX","3":"11933687094"},{"1":"2020","2":"ST RETAILER'S OCCUPATION TAX","3":"11742238991"},{"1":"2021","2":"ST RETAILER'S OCCUPATION TAX","3":"13248519027"},{"1":"2022","2":"ST RETAILER'S OCCUPATION TAX","3":"14679765671"},{"1":"2023","2":"ST RETAILER'S OCCUPATION TAX","3":"15378788374"},{"1":"2024","2":"ST RETAILER'S OCCUPATION TAX","3":"15578366159"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</figure>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))<span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>fy, <span class="sc">-</span>revenue)<span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from=</span><span class="st">"revenue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-online-retailers-2" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-online-retailers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.11: Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)
</figcaption>
<div aria-describedby="fig-online-retailers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div data-pagedtable="false">
<script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["source_name_AWM"],"name":[1],"type":["chr"],"align":["left"]},{"label":["fund_name_ab"],"name":[2],"type":["chr"],"align":["left"]},{"label":["2024"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["2023"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["2022"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["2021"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["2020"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["2019"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["1998"],"name":[29],"type":["dbl"],"align":["right"]}],"data":[{"1":"ST RETAILER'S OCCUPATION TAX","2":"GENERAL REVENUE","3":"7627529554.2","4":"7622768087","5":"7.474841e+09","6":"6878038741","7":"6.029994e+09","8":"6143411130.5","9":"5.659704e+09","10":"3508278730","11":"3403391763","12":"3350652609","13":"3129085179","14":"2971474139","15":"2923026459","16":"2802131185","17":"2786537809","18":"2887759462","19":"3106461323.7","20":"3072680298","21":"3127800433.6","22":"2957836055","23":"2825303922","24":"2735399996","25":"2761607185","26":"2573002547","27":"2585941569","28":"2399803574.6","29":"2214054217"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"GR - CS SPECIAL ACCT","3":"2767574445.9","4":"2758841969","5":"2.697499e+09","6":"2437857055","7":"2.159463e+09","8":"2210334466.5","9":"2.035169e+09","10":"1169426243","11":"1134462136","12":"1116884200","13":"1043028320","14":"992020524","15":"980834017","16":"934043725","17":"929767299","18":"962586484","19":"1035487105.0","20":"1024226764","21":"1044483054.0","22":"985945352","23":"942133347","24":"911185965","25":"920535726","26":"857667514","27":"861980521","28":"799934523.5","29":"738018073"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"LOCAL GOVERNMENT TAX","3":"2475494815.4","4":"2323397177","5":"2.389592e+09","6":"1969278248","7":"1.856985e+09","8":"1877739038.7","9":"1.944120e+09","10":"1066339038","11":"1059095301","12":"1020725203","13":"967408934","14":"926871479","15":"907516811","16":"887342404","17":"883153994","18":"866693294","19":"1002431579.6","20":"945869399","21":"928711636.3","22":"890099627","23":"844688783","24":"813031023","25":"817403296","26":"759973557","27":"759304760","28":"696125794.5","29":"657638442"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"STATE AND LOCAL SALES TX REFRM","3":"572186860.9","4":"654222095","5":"5.474820e+08","6":"819408747","7":"5.825632e+08","8":"540249679.5","9":"4.385776e+08","10":"221929645","11":"234080782","12":"211005502","13":"175425397","14":"154492451","15":"153562540","16":"141408631","17":"128102379","18":"137332163","19":"157199510.0","20":"143629298","21":"131156742.5","22":"115108746","23":"127385842","24":"91295979","25":"120652142","26":"124833268","27":"122975066","28":"107056239.7","29":"98322759"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"ROAD","3":"569724102.0","4":"484243779","5":"1.324043e+08","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"COUNTY & MASS TRANSIT DISTRICT","3":"511876175.7","4":"512617139","5":"4.882731e+08","6":"379974673","7":"3.718420e+08","8":"389451877.9","9":"3.901015e+08","10":"236320840","11":"219522993","12":"209676237","13":"200086791","14":"193812949","15":"188564070","16":"179084426","17":"176973402","18":"180193513","19":"208561551.0","20":"197580002","21":"197565148.2","22":"194385600","23":"185963611","24":"179560690","25":"177144373","26":"165806344","27":"158216355","28":"147304704.5","29":"140743600"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"PUBLIC TRANSPORTATION","3":"375100452.8","4":"358712551","5":"3.360171e+08","6":"214849641","7":"2.313792e+08","8":"278357260.8","9":"2.509834e+08","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"DOWNSTATE PUBL TRANSPORTATION","3":"299743603.7","4":"295045269","5":"2.816391e+08","6":"215647369","7":"2.048218e+08","8":"209235008.4","9":"1.948201e+08","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"BUILD ILLINOIS","3":"216866182.6","4":"214422055","5":"2.031856e+08","6":"182098321","7":"1.611963e+08","8":"164860880.8","9":"1.515862e+08","10":"86722359","11":"84619442","12":"82824874","13":"77614575","14":"73732679","15":"72901233","16":"69425867","17":"69105661","18":"71544972","19":"76963365.5","20":"76126432","21":"77631996.6","22":"73281137","23":"70024777","24":"67758995","25":"68711347","26":"64018689","27":"64340624","28":"59709337.5","29":"55087722"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"CAPITAL PROJECTS","3":"71939000.0","4":"67505000","5":"6.398800e+07","6":"62641000","7":"6.133800e+07","8":"60091000.0","9":"5.903600e+07","10":"57974000","11":"42693750","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"2000000","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"MCCORMICK PLACE EXPANSION PROJ","3":"61241521.3","4":"49811395","5":"4.151308e+07","6":"71806348","7":"5.958414e+07","8":"53849750.5","9":"3.844432e+07","10":"NA","11":"NA","12":"NA","13":"13762500","14":"4587500","15":"19475601","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"STATE AVIATION PROGRAM","3":"21762848.1","4":"27319394","5":"1.732845e+07","6":"5883474","7":"4.831151e+06","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"STATE CRIME LABORATORY","3":"6000000.0","4":"6000000","5":"6.000000e+06","6":"6000000","7":"6.000000e+06","8":"6000000.0","9":"6.000000e+06","10":"6000000","11":"6000000","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"STAR BONDS REVENUE","3":"874703.6","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"PROTEST","3":"451892.4","4":"3882464","5":"NA","6":"NA","7":"4.790317e+04","8":"107000.3","9":"7.821590e+03","10":"1507503","11":"NA","12":"364697","13":"2033285","14":"5755277","15":"10807988","16":"30640279","17":"4138549","18":"27846588","19":"956594.3","20":"1308597","21":"854964.4","22":"5180363","23":"10572542","24":"3476589","25":"1781023","26":"1024775","27":"540611","28":"787312.5","29":"1211378"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"ST TREASURERS ADMINISTRATIVE","3":"NA","4":"NA","5":"1.954630e+03","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"COMMON SCHOOL","3":"NA","4":"NA","5":"NA","6":"5035411","7":"1.219348e+07","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"IL TAX INCREMENT","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"3093696","14":"11375899","15":"11247619","16":"10838319","17":"10662016","18":"11038367","19":"11874347.9","20":"11745221","21":"11977507.9","22":"11306233","23":"10803823","24":"10454219","25":"10601179","26":"9877169","27":"9926839","28":"9212298.0","29":"8499249"},{"1":"ST RETAILER'S OCCUPATION TAX","2":"LOCAL GOVERNMENT DISTRIBUTIVE","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"15705451","26":"14632843","27":"14706428","28":"13647848.7","29":"12591479"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</figure>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts))<span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>)<span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State Retailers' Occupation Tax, Source 0481"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-online-retailers-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-online-retailers-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.12: Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)
</figcaption>
<div aria-describedby="fig-online-retailers-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-online-retailers-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>State tax began being collected for remote retailers based on destination beginning in Leveling the Playing Field went into effect for Amazon on January 1, 2020 (mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22).</p>
</div></div><div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Remote Occupation Tax</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># STATE ROT-2.2%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))<span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>fy, <span class="sc">-</span>revenue)<span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from=</span><span class="st">"revenue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-stateROT" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-stateROT-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3.1: Remote Occupation Tax: State ROT
</figcaption>
<div aria-describedby="tbl-stateROT-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["fy"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["source_name_AWM"],"name":[2],"type":["chr"],"align":["left"]},{"label":["revenue"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"1998","2":"STATE ROT-2.2%","3":"119619052"},{"1":"1999","2":"STATE ROT-2.2%","3":"129654562"},{"1":"2000","2":"STATE ROT-2.2%","3":"139711068"},{"1":"2001","2":"STATE ROT-2.2%","3":"139012009"},{"1":"2002","2":"STATE ROT-2.2%","3":"149201782"},{"1":"2003","2":"STATE ROT-2.2%","3":"147133816"},{"1":"2004","2":"STATE ROT-2.2%","3":"152053800"},{"1":"2005","2":"STATE ROT-2.2%","3":"159124754"},{"1":"2006","2":"STATE ROT-2.2%","3":"168572334"},{"1":"2007","2":"STATE ROT-2.2%","3":"165303109"},{"1":"2008","2":"STATE ROT-2.2%","3":"167120450"},{"1":"2009","2":"STATE ROT-2.2%","3":"155354795"},{"1":"2010","2":"STATE ROT-2.2%","3":"150058006"},{"1":"2011","2":"STATE ROT-2.2%","3":"150753311"},{"1":"2012","2":"STATE ROT-2.2%","3":"158299820"},{"1":"2013","2":"STATE ROT-2.2%","3":"160105245"},{"1":"2014","2":"STATE ROT-2.2%","3":"168534506"},{"1":"2015","2":"STATE ROT-2.2%","3":"179848297"},{"1":"2016","2":"STATE ROT-2.2%","3":"183747953"},{"1":"2017","2":"STATE ROT-2.2%","3":"188311409"},{"1":"2018","2":"STATE ROT-2.2%","3":"329158455"},{"1":"2019","2":"STATE ROT-2.2%","3":"357983627"},{"1":"2020","2":"STATE ROT-2.2%","3":"350026282"},{"1":"2021","2":"STATE ROT-2.2%","3":"395413497"},{"1":"2022","2":"STATE ROT-2.2%","3":"441203043"},{"1":"2023","2":"STATE ROT-2.2%","3":"465602177"},{"1":"2024","2":"STATE ROT-2.2%","3":"470909426"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["source_name_AWM"],"name":[1],"type":["chr"],"align":["left"]},{"label":["fund_name_ab"],"name":[2],"type":["chr"],"align":["left"]},{"label":["2024"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["2023"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["2022"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["2021"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["2020"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["2019"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["2018"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["2017"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["2016"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["2015"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["2014"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["2013"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["2012"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["2011"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["2010"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["2009"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["2008"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["2007"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["2006"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["2005"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["2004"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["2003"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["2002"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["2001"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["2000"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["1999"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["1998"],"name":[29],"type":["dbl"],"align":["right"]}],"data":[{"1":"STATE ROT-2.2%","2":"BUILD ILLINOIS","3":"470909426","4":"465602177","5":"441203043","6":"395413497","7":"350026282","8":"357983627","9":"329158455","10":"188311409","11":"183747953","12":"179848297","13":"168534506","14":"160105245","15":"158299820","16":"150753311","17":"150058006","18":"155354795","19":"167120450","20":"165303109","21":"168572334","22":"159124754","23":"152053800","24":"147133816","25":"149201782","26":"139012009","27":"139711068","28":"129654562","29":"119619052"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts))<span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>)<span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State Retailers' Occupation Tax"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))  <span class="sc">%&gt;%</span> </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>revenue, <span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>) <span class="sc">+</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>) <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State ROT - 2.2%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span> <span class="sc">|</span> source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))  <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>revenue, <span class="at">color=</span>source_name_AWM))<span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>)<span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State ROT - 2.2% &amp; "</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Large increases due to Leveling the Playing Field Act &amp; Online shopping during pandemic??"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-stateROT" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-stateROT-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.13: Large increases due to Leveling the Playing Field Act &amp; Online shopping during pandemic. Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)
</figcaption>
<div aria-describedby="fig-stateROT-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="OwnSourceRev_files/figure-html/fig-stateROT-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p>As of Feb.&nbsp;6 2023, Source 481 Retailers Occupation Tax has collected $9.3 billion already. FY22 had $14.7 million. Around half goes to the General Revenue Fund.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>          rev_type <span class="sc">==</span> <span class="st">"02"</span> <span class="sc">|</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(source_name_AWM, <span class="st">"PPRT"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">str_detect</span>(fund, <span class="st">"REFUND"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># aes(x=fy, y=receipts/1000, group = source))+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_recessions</span>(<span class="at">text =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text(data = annotation, aes(x=x, y=y, label=label)) +</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"dotted"</span>, <span class="st">"dashed"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"What the State Actually Gets to Keep"</span>, </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Tax Revenue collected by the State minus (refund fund $ &amp; Local Transfers)"</span>,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"02"</span> <span class="sc">|</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(source_name_AWM, <span class="st">"PPRT"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">str_detect</span>(fund, <span class="st">"REFUND"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>           rev_type</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>           <span class="co"># source, source_name_AWM</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># aes(x=fy, y=receipts/1000, group = source))+</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">group =</span> rev_type, <span class="at">color=</span>rev_type</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>                ) )<span class="sc">+</span> </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"What the State Actually Gets to Keep"</span>, </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Tax Revenue collected by the State minus (refund fund $ &amp; Local Transfers)"</span>,</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="OwnSourceRev_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Everything_changepensions.html" class="pagination-link" aria-label="Pension Costs Included within Department Expenditures">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Pension Costs Included within Department Expenditures</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./FederalRevenue.html" class="pagination-link" aria-label="Federal Revenue">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Federal Revenue</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb16" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Own Source Revenue"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, warning = FALSE, message = FALSE}</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="in">library(haven)</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="in">library(formatR)</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="in">library(lubridate)</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="in">library(smooth)</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="in">library(forecast)</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="in">library(scales)</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="in">library(kableExtra)</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="in">library(readxl)</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="in">library(data.table)</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="in">library(quantmod)</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="in">library(geofacet)</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="in">library(janitor)</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="in">library(cmapplot)</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggrepel)</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="in">theme_set(theme_classic())</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(warning = FALSE, message = FALSE)</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="in">exp_temp &lt;- read_csv("./data/exp_temp.csv") %&gt;% </span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(agency != "799") </span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="in">rev_temp &lt;- read_csv("./data/rev_temp.csv") %&gt;% </span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(agency != "799")</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="in">current_year = 2024</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="in">```{r include=FALSE}</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="in">library(cmapplot)</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="in">update_recessions &lt;- function(url = NULL, quietly = FALSE){</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a><span class="in">  # Use default URL if user does not override</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="in">  if (is_null(url) | missing(url)) {</span></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a><span class="in">    url &lt;- "https://data.nber.org/data/cycles/business_cycle_dates.json"</span></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="in">   # locally bind variable names</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="in">  start_char &lt;- end_char &lt;- start_date &lt;- end_date &lt;- ongoing &lt;- index &lt;- peak &lt;- trough &lt;- NULL</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a><span class="in">  return(</span></span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a><span class="in">    # attempt to download and format recessions table</span></span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a><span class="in">    tryCatch({</span></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a><span class="in">      recessions &lt;- jsonlite::fromJSON(url) %&gt;%</span></span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a><span class="in">        # drop first row trough</span></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a><span class="in">        dplyr::slice(-1) %&gt;%</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a><span class="in">        # convert peaks and troughs...</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a><span class="in">        dplyr::mutate(</span></span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="in">          # ...to R dates</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="in">          start_date = as.Date(peak),</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="in">          end_date = as.Date(trough),</span></span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a><span class="in">          # ... and clean char strings</span></span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a><span class="in">          start_char = format(start_date, "%b %Y"),</span></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="in">          end_char = format(end_date, "%b %Y")) %&gt;%</span></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a><span class="in">        # confirm ascending and create row number</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a><span class="in">        dplyr::arrange(start_date) %&gt;%</span></span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a><span class="in">        mutate(index = row_number()) %&gt;%</span></span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a><span class="in">        mutate(</span></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a><span class="in">          # Flag unfinished recessions</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a><span class="in">          ongoing = case_when(</span></span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a><span class="in">            is.na(end_date) &amp; index == max(.$index) ~ T,</span></span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a><span class="in">            TRUE ~ F),</span></span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a><span class="in">          # set ongoing recession to arbitrary future date</span></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a><span class="in">          end_date = case_when(</span></span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a><span class="in">            ongoing ~ as.Date("2200-01-01"),</span></span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a><span class="in">            TRUE ~ end_date),</span></span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a><span class="in">          # mark ongoing recession in char field</span></span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a><span class="in">          end_char = case_when(</span></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a><span class="in">            ongoing ~ "Ongoing",</span></span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a><span class="in">            TRUE ~ end_char)</span></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a><span class="in">          ) %&gt;%</span></span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a><span class="in">        # clean up</span></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a><span class="in">        select(start_char, end_char, start_date, end_date, ongoing)</span></span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a><span class="in">      if (!quietly) {message("Successfully fetched from NBER")}</span></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a><span class="in">      # Return recessions</span></span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a><span class="in">      recessions</span></span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a><span class="in">    },</span></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a><span class="in">    error = function(cond){</span></span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a><span class="in">      if (!quietly) message("WARNING: Fetch or processing failed. `NULL` returned.")</span></span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a><span class="in">      return(NULL)</span></span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a><span class="in">    )</span></span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a><span class="in">#recess_table &lt;- list(build_recessions(update))</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a><span class="in">recessions &lt;- update_recessions()</span></span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/clipboard-434299901.png)</span></span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/clipboard-131008373.png)</span></span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a><span class="fu">## Income Taxes</span></span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a>Income taxes include Individual income taxes and corporate income taxes.</span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-combined-incometaxes</span></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Break down of ALL Income Tax"</span></span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">if_else</span>(fy <span class="sc">==</span> <span class="fu">max</span>(fy), <span class="fu">as.character</span>(source_name_AWM), <span class="cn">NA_character_</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM, label) <span class="sc">%&gt;%</span> </span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label)) <span class="sc">+</span></span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span> ,</span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="st">"cm"</span>)) <span class="sc">+</span></span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Income Tax by Revenue Source"</span>, </span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)  <span class="sc">+</span></span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">'off'</span>, <span class="at">expand =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">if_else</span>(fy <span class="sc">==</span> <span class="fu">max</span>(fy), <span class="fu">as.character</span>(fund_name_ab), <span class="cn">NA_character_</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab, label) <span class="sc">%&gt;%</span> </span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span></span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> label),   </span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a>              <span class="at">hjust =</span> <span class="dv">0</span>, </span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a>            <span class="at">direction =</span> <span class="st">"y"</span>,</span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a>              <span class="at">segment.linetype =</span> <span class="st">"dotted"</span>,</span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlim =</span> <span class="fu">c</span>(current_year <span class="sc">+</span> .<span class="dv">5</span>, <span class="cn">NA</span>)</span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="st">"cm"</span>)</span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">'off'</span>) <span class="sc">+</span></span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"All Income Tax Money by Receiving Fund"</span>, </span>
<span id="cb16-169"><a href="#cb16-169" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-170"><a href="#cb16-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Individual Income Tax</span></span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-incometax-pprt</span></span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Break down of Individual Income Tax"</span></span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a><span class="co">#  scale_x_continuous(expand = c(0,0)) +</span></span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Individual Income Tax  Breakdown"</span>, <span class="at">subtitle =</span> <span class="st">"Revenue sources for rev_type == 02"</span>,</span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a> <span class="co"># scale_x_continuous(expand = c(0,0)) +</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Individual Income Tax  Breakdown"</span>, </span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Funds receiving rev_type == 02"</span>,</span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Corporate Income Tax</span></span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-221"><a href="#cb16-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-222"><a href="#cb16-222" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-corpinctax</span></span>
<span id="cb16-223"><a href="#cb16-223" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Break down of Corporte Income Tax"</span></span>
<span id="cb16-224"><a href="#cb16-224" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb16-225"><a href="#cb16-225" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb16-226"><a href="#cb16-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb16-227"><a href="#cb16-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-228"><a href="#cb16-228" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-229"><a href="#cb16-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb16-230"><a href="#cb16-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-231"><a href="#cb16-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-232"><a href="#cb16-232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-233"><a href="#cb16-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb16-234"><a href="#cb16-234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-235"><a href="#cb16-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-236"><a href="#cb16-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-237"><a href="#cb16-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Corporate Income Tax  Breakdown"</span>, </span>
<span id="cb16-238"><a href="#cb16-238" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Corporate Income Taxes include money transfered straight to local governments and funds saved for tax refunds."</span>,</span>
<span id="cb16-239"><a href="#cb16-239" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-240"><a href="#cb16-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-241"><a href="#cb16-241" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-242"><a href="#cb16-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-243"><a href="#cb16-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-244"><a href="#cb16-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-245"><a href="#cb16-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-246"><a href="#cb16-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb16-247"><a href="#cb16-247" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-248"><a href="#cb16-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-249"><a href="#cb16-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-250"><a href="#cb16-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-251"><a href="#cb16-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Corporate Income Tax Breakdown"</span>, </span>
<span id="cb16-252"><a href="#cb16-252" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Corporate Income Taxes include money transfered straight to local governments and funds saved for tax refunds."</span>,</span>
<span id="cb16-253"><a href="#cb16-253" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span>
<span id="cb16-254"><a href="#cb16-254" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-255"><a href="#cb16-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-256"><a href="#cb16-256" aria-hidden="true" tabindex="-1"></a><span class="fu">#### PPRT</span></span>
<span id="cb16-257"><a href="#cb16-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-260"><a href="#cb16-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-261"><a href="#cb16-261" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">|&gt;</span> </span>
<span id="cb16-262"><a href="#cb16-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-263"><a href="#cb16-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb16-264"><a href="#cb16-264" aria-hidden="true" tabindex="-1"></a>    source_name_AWM <span class="sc">!=</span> <span class="st">"PERS PROP REPL TAX AMNESTY"</span> <span class="sc">&amp;</span> (</span>
<span id="cb16-265"><a href="#cb16-265" aria-hidden="true" tabindex="-1"></a>          source_name_AWM  <span class="sc">==</span> <span class="st">"INDIV. INCOME TAX PASS-THROUGH"</span> <span class="sc">|</span></span>
<span id="cb16-266"><a href="#cb16-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-267"><a href="#cb16-267" aria-hidden="true" tabindex="-1"></a>    source_name <span class="sc">==</span> <span class="st">"CORPORATE"</span> <span class="sc">|</span> </span>
<span id="cb16-268"><a href="#cb16-268" aria-hidden="true" tabindex="-1"></a>         source_name <span class="sc">==</span> <span class="st">"PERS PROP REPLACE"</span> <span class="sc">|</span> </span>
<span id="cb16-269"><a href="#cb16-269" aria-hidden="true" tabindex="-1"></a>           source_name <span class="sc">==</span> <span class="st">"PPRT-PERSON PROP TAX REPLACE"</span><span class="co">#|</span></span>
<span id="cb16-270"><a href="#cb16-270" aria-hidden="true" tabindex="-1"></a>          <span class="co"># fund_name_ab == "PERSONAL PROPERTY TAX REPLACE" </span></span>
<span id="cb16-271"><a href="#cb16-271" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb16-272"><a href="#cb16-272" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb16-273"><a href="#cb16-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">rev =</span> <span class="fu">sum</span>(receipts)) <span class="sc">|&gt;</span></span>
<span id="cb16-274"><a href="#cb16-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-275"><a href="#cb16-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y =</span> rev, <span class="at">fill =</span> source_name_AWM), <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb16-276"><a href="#cb16-276" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb16-277"><a href="#cb16-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb16-278"><a href="#cb16-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-279"><a href="#cb16-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-282"><a href="#cb16-282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-283"><a href="#cb16-283" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">|&gt;</span> </span>
<span id="cb16-284"><a href="#cb16-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-285"><a href="#cb16-285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb16-286"><a href="#cb16-286" aria-hidden="true" tabindex="-1"></a>    source_name_AWM <span class="sc">!=</span> <span class="st">"PERS PROP REPL TAX AMNESTY"</span> <span class="sc">&amp;</span> (</span>
<span id="cb16-287"><a href="#cb16-287" aria-hidden="true" tabindex="-1"></a>          source_name_AWM  <span class="sc">==</span> <span class="st">"INDIV. INCOME TAX PASS-THROUGH"</span> <span class="sc">|</span></span>
<span id="cb16-288"><a href="#cb16-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-289"><a href="#cb16-289" aria-hidden="true" tabindex="-1"></a>    source_name <span class="sc">==</span> <span class="st">"CORPORATE"</span> <span class="sc">|</span> </span>
<span id="cb16-290"><a href="#cb16-290" aria-hidden="true" tabindex="-1"></a>         source_name <span class="sc">==</span> <span class="st">"PERS PROP REPLACE"</span> <span class="sc">|</span> </span>
<span id="cb16-291"><a href="#cb16-291" aria-hidden="true" tabindex="-1"></a>           source_name <span class="sc">==</span> <span class="st">"PPRT-PERSON PROP TAX REPLACE"</span><span class="co">#|</span></span>
<span id="cb16-292"><a href="#cb16-292" aria-hidden="true" tabindex="-1"></a>          <span class="co"># fund_name_ab == "PERSONAL PROPERTY TAX REPLACE" </span></span>
<span id="cb16-293"><a href="#cb16-293" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb16-294"><a href="#cb16-294" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb16-295"><a href="#cb16-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">rev =</span> <span class="fu">sum</span>(receipts)) <span class="sc">|&gt;</span></span>
<span id="cb16-296"><a href="#cb16-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-297"><a href="#cb16-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y =</span> rev, <span class="at">fill =</span> fund_name_ab), <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb16-298"><a href="#cb16-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb16-299"><a href="#cb16-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb16-300"><a href="#cb16-300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-301"><a href="#cb16-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-302"><a href="#cb16-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-303"><a href="#cb16-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sales Tax</span></span>
<span id="cb16-304"><a href="#cb16-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-307"><a href="#cb16-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-308"><a href="#cb16-308" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-salestax-pprt</span></span>
<span id="cb16-309"><a href="#cb16-309" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Break down of Sales Tax. Sales Taxes include money transfered straight to local governments and funds saved for tax refunds."</span></span>
<span id="cb16-310"><a href="#cb16-310" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 3</span></span>
<span id="cb16-311"><a href="#cb16-311" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page</span></span>
<span id="cb16-312"><a href="#cb16-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-313"><a href="#cb16-313" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-314"><a href="#cb16-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb16-315"><a href="#cb16-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-316"><a href="#cb16-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">round</span>(<span class="fu">sum</span>(receipts))) <span class="sc">%&gt;%</span> </span>
<span id="cb16-317"><a href="#cb16-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from =</span> <span class="st">"receipts"</span>)</span>
<span id="cb16-318"><a href="#cb16-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-319"><a href="#cb16-319" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-320"><a href="#cb16-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb16-321"><a href="#cb16-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-322"><a href="#cb16-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-323"><a href="#cb16-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-324"><a href="#cb16-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb16-325"><a href="#cb16-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-326"><a href="#cb16-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-327"><a href="#cb16-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-328"><a href="#cb16-328" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb16-329"><a href="#cb16-329" aria-hidden="true" tabindex="-1"></a>   <span class="co"># theme(legend.position = "none") +</span></span>
<span id="cb16-330"><a href="#cb16-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-331"><a href="#cb16-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sales Tax Breakdown"</span>, </span>
<span id="cb16-332"><a href="#cb16-332" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-333"><a href="#cb16-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-334"><a href="#cb16-334" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-335"><a href="#cb16-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"06"</span> <span class="sc">&amp;</span> fy <span class="sc">&gt;</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-336"><a href="#cb16-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-337"><a href="#cb16-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-338"><a href="#cb16-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-339"><a href="#cb16-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> fund_name_ab)) <span class="sc">+</span> </span>
<span id="cb16-340"><a href="#cb16-340" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text(data = annotation, aes(x=x, y=y, label=label)) +</span></span>
<span id="cb16-341"><a href="#cb16-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-342"><a href="#cb16-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-343"><a href="#cb16-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-344"><a href="#cb16-344" aria-hidden="true" tabindex="-1"></a> <span class="co"># scale_linetype_manual(values = c("dotted", "dashed", "solid")) +</span></span>
<span id="cb16-345"><a href="#cb16-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb16-346"><a href="#cb16-346" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  theme(legend.position = "none") +</span></span>
<span id="cb16-347"><a href="#cb16-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-348"><a href="#cb16-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Sales Tax Breakdown"</span>, </span>
<span id="cb16-349"><a href="#cb16-349" aria-hidden="true" tabindex="-1"></a>       <span class="co">#subtitle = "Sales Taxes include money transfered straight to local governments and funds saved for tax refunds.",</span></span>
<span id="cb16-350"><a href="#cb16-350" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>)</span>
<span id="cb16-351"><a href="#cb16-351" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-352"><a href="#cb16-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-353"><a href="#cb16-353" aria-hidden="true" tabindex="-1"></a><span class="fu">### Online retailers</span></span>
<span id="cb16-354"><a href="#cb16-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-355"><a href="#cb16-355" aria-hidden="true" tabindex="-1"></a>&lt;div&gt;</span>
<span id="cb16-356"><a href="#cb16-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-357"><a href="#cb16-357" aria-hidden="true" tabindex="-1"></a>::: callout-warning</span>
<span id="cb16-358"><a href="#cb16-358" aria-hidden="true" tabindex="-1"></a>**Online Retailer Warning**</span>
<span id="cb16-359"><a href="#cb16-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-360"><a href="#cb16-360" aria-hidden="true" tabindex="-1"></a>Not edited or double checked. Randomly looked into online retailers recently and didn't finish thoughts on it. Just general notes pulled together while looking into online sales tax.</span>
<span id="cb16-361"><a href="#cb16-361" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-362"><a href="#cb16-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-363"><a href="#cb16-363" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb16-364"><a href="#cb16-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-365"><a href="#cb16-365" aria-hidden="true" tabindex="-1"></a>Law was passed in 2018 that required out of state retailers to pay the 6.25% **state** sales tax. The Rebuild Illinois law expanded the law to require remote retailers to charge all state and local retailers occupation taxes beginning in July 1, 2020. Before Jan. 1 2021, only state sales taxes were required to be collected (related to South Dakota v Wayfair court decision). Now required to pay state **and local** tax based on where product is delivered.</span>
<span id="cb16-366"><a href="#cb16-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-367"><a href="#cb16-367" aria-hidden="true" tabindex="-1"></a>"On June 28, 2019, Public Act 101-0031, the"Leveling the Playing Field for Illinois Retail Act," was signed into Illinois law and on December 13, 2019 an amendment to the Act was signed into law in Public Act 101-0604. In an effort to create more equity between remote sellers and local brick-and-mortar retailers, the new law requires remote sellers without a physical presence in the state and marketplace facilitators (e.g., Amazon and Walmart) to collect both state and local sales taxes effective January 1, 2021." <span class="co">[</span><span class="ot">CivicFed.org</span><span class="co">](https://www.civicfed.org/civic-federation/blog/consumer-taxes-chicago-increases-and-updates-2021)</span></span>
<span id="cb16-368"><a href="#cb16-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-369"><a href="#cb16-369" aria-hidden="true" tabindex="-1"></a>Requires remote sellers and marketplace facilitators to collect and remit the state and locally-imposed Retailers' Occupation Tax (ROT) for the jurisdictions where the product is delivered (destination sourcing) rather than collecting and remitting solely the state use tax.&nbsp;\</span>
<span id="cb16-370"><a href="#cb16-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-371"><a href="#cb16-371" aria-hidden="true" tabindex="-1"></a>::: aside</span>
<span id="cb16-372"><a href="#cb16-372" aria-hidden="true" tabindex="-1"></a>Illinois' State sales tax rate is 6.25%, of which 5.0% of the sales tax revenue goes to the State, 1.0% goes to all municipalities, including Chicago, and the remaining 0.25% goes to the counties. However, Cook County's 0.25% share of the State sales tax is distributed to the Regional Transportation Authority.</span>
<span id="cb16-373"><a href="#cb16-373" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-374"><a href="#cb16-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-375"><a href="#cb16-375" aria-hidden="true" tabindex="-1"></a>"The amended"Leveling the Playing Field for Illinois Retail Act" was passed by the General Assembly on November 14, 2019, to require both Remote Retailers and Marketplace Facilitators to collect and remit the state and locally-imposed Retailers' Occupation Tax (ROT, aka sales tax) for the jurisdictions where the product is delivered (its destination) starting January 1, 2021."- <span class="co">[</span><span class="ot">Illinois Municipal League</span><span class="co">](https://www.iml.org/file.cfm?key=16124)</span></span>
<span id="cb16-376"><a href="#cb16-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-377"><a href="#cb16-377" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Marketplace Facilitators, like Amazon, were required to collect Use Tax on sales starting January 1, 2020</span>
<span id="cb16-378"><a href="#cb16-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-379"><a href="#cb16-379" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Other sellers required to collect state and local sales tax on sales on January 2021.</span>
<span id="cb16-380"><a href="#cb16-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-381"><a href="#cb16-381" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>There is a **state** tax rate of 6.25% and Illinois municipalities may impose an additional **local** sales tax called the Retailer's Occupation Tax.</span>
<span id="cb16-382"><a href="#cb16-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-383"><a href="#cb16-383" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>For remote sellers, the state tax rate is referred to as "use tax" and for intrastate sellers, "ROT" simply means *sales tax*.&nbsp;&nbsp;</span>
<span id="cb16-384"><a href="#cb16-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-385"><a href="#cb16-385" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The ROT is measured upon the seller's gross receipts and the seller is statutorily <span class="co">[</span><span class="ot">required</span><span class="co">]</span>{.underline} to collect the use tax from their customers.</span>
<span id="cb16-386"><a href="#cb16-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-387"><a href="#cb16-387" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>source 0482 is State ROT-2.2%</span>
<span id="cb16-388"><a href="#cb16-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-389"><a href="#cb16-389" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">ILGA info</span><span class="co">](https://www.ilga.gov/legislation/ilcs/ilcs5.asp?ActID=3993&amp;ChapterID=8)</span> - leveling the playing field went into effect on July 1 2020 which is the beginning of FY21</span>
<span id="cb16-390"><a href="#cb16-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-393"><a href="#cb16-393" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-394"><a href="#cb16-394" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-online-retailers</span></span>
<span id="cb16-395"><a href="#cb16-395" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)"</span></span>
<span id="cb16-396"><a href="#cb16-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-397"><a href="#cb16-397" aria-hidden="true" tabindex="-1"></a><span class="do">## State Retailers Occupation Tax. </span></span>
<span id="cb16-398"><a href="#cb16-398" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-399"><a href="#cb16-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))</span>
<span id="cb16-400"><a href="#cb16-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-401"><a href="#cb16-401" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-402"><a href="#cb16-402" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-403"><a href="#cb16-403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-404"><a href="#cb16-404" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))<span class="sc">%&gt;%</span></span>
<span id="cb16-405"><a href="#cb16-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>fy, <span class="sc">-</span>revenue)<span class="sc">%&gt;%</span></span>
<span id="cb16-406"><a href="#cb16-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from=</span><span class="st">"revenue"</span>)</span>
<span id="cb16-407"><a href="#cb16-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-408"><a href="#cb16-408" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-409"><a href="#cb16-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-410"><a href="#cb16-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts))<span class="sc">+</span></span>
<span id="cb16-411"><a href="#cb16-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb16-412"><a href="#cb16-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb16-413"><a href="#cb16-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>)<span class="sc">+</span></span>
<span id="cb16-414"><a href="#cb16-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb16-415"><a href="#cb16-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-416"><a href="#cb16-416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State Retailers' Occupation Tax, Source 0481"</span>)</span>
<span id="cb16-417"><a href="#cb16-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-418"><a href="#cb16-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-419"><a href="#cb16-419" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-420"><a href="#cb16-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-421"><a href="#cb16-421" aria-hidden="true" tabindex="-1"></a>::: aside</span>
<span id="cb16-422"><a href="#cb16-422" aria-hidden="true" tabindex="-1"></a>State tax began being collected for remote retailers based on destination beginning in Leveling the Playing Field went into effect for Amazon on January 1, 2020 (mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22).</span>
<span id="cb16-423"><a href="#cb16-423" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb16-424"><a href="#cb16-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-427"><a href="#cb16-427" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-428"><a href="#cb16-428" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-stateROT</span></span>
<span id="cb16-429"><a href="#cb16-429" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Remote Occupation Tax: State ROT" </span></span>
<span id="cb16-430"><a href="#cb16-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-431"><a href="#cb16-431" aria-hidden="true" tabindex="-1"></a><span class="do">### Remote Occupation Tax</span></span>
<span id="cb16-432"><a href="#cb16-432" aria-hidden="true" tabindex="-1"></a><span class="co"># STATE ROT-2.2%</span></span>
<span id="cb16-433"><a href="#cb16-433" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-434"><a href="#cb16-434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-435"><a href="#cb16-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-436"><a href="#cb16-436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))</span>
<span id="cb16-437"><a href="#cb16-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-438"><a href="#cb16-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-439"><a href="#cb16-439" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-440"><a href="#cb16-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-441"><a href="#cb16-441" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-442"><a href="#cb16-442" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))<span class="sc">%&gt;%</span></span>
<span id="cb16-443"><a href="#cb16-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>fy, <span class="sc">-</span>revenue)<span class="sc">%&gt;%</span></span>
<span id="cb16-444"><a href="#cb16-444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fy"</span>, <span class="at">values_from=</span><span class="st">"revenue"</span>)</span>
<span id="cb16-445"><a href="#cb16-445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-446"><a href="#cb16-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-449"><a href="#cb16-449" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-450"><a href="#cb16-450" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb16-451"><a href="#cb16-451" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-452"><a href="#cb16-452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-453"><a href="#cb16-453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts))<span class="sc">+</span></span>
<span id="cb16-454"><a href="#cb16-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb16-455"><a href="#cb16-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb16-456"><a href="#cb16-456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>)<span class="sc">+</span></span>
<span id="cb16-457"><a href="#cb16-457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-458"><a href="#cb16-458" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-459"><a href="#cb16-459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State Retailers' Occupation Tax"</span>)</span>
<span id="cb16-460"><a href="#cb16-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-461"><a href="#cb16-461" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-462"><a href="#cb16-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-463"><a href="#cb16-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM, fund_name_ab) <span class="sc">%&gt;%</span> </span>
<span id="cb16-464"><a href="#cb16-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))  <span class="sc">%&gt;%</span> </span>
<span id="cb16-465"><a href="#cb16-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb16-466"><a href="#cb16-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>revenue, <span class="at">color=</span>fund_name_ab))<span class="sc">+</span></span>
<span id="cb16-467"><a href="#cb16-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>) <span class="sc">+</span></span>
<span id="cb16-468"><a href="#cb16-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>) <span class="sc">+</span></span>
<span id="cb16-469"><a href="#cb16-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb16-470"><a href="#cb16-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-471"><a href="#cb16-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State ROT - 2.2%"</span>)</span>
<span id="cb16-472"><a href="#cb16-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-473"><a href="#cb16-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-476"><a href="#cb16-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-477"><a href="#cb16-477" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-stateROT</span></span>
<span id="cb16-478"><a href="#cb16-478" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Large increases due to Leveling the Playing Field Act &amp; Online shopping during pandemic. Leveling the Playing Field went into effect for Amazon on January 1, 2020(mid-FY21) and for other remote retailers starting January 1, 2021 (mid-FY22)" </span></span>
<span id="cb16-479"><a href="#cb16-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-480"><a href="#cb16-480" aria-hidden="true" tabindex="-1"></a>rev_temp <span class="sc">%&gt;%</span> </span>
<span id="cb16-481"><a href="#cb16-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"0482"</span> <span class="sc">|</span> source <span class="sc">==</span> <span class="st">"0481"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-482"><a href="#cb16-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-483"><a href="#cb16-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">revenue=</span><span class="fu">sum</span>(receipts))  <span class="sc">%&gt;%</span> </span>
<span id="cb16-484"><a href="#cb16-484" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb16-485"><a href="#cb16-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>revenue, <span class="at">color=</span>source_name_AWM))<span class="sc">+</span></span>
<span id="cb16-486"><a href="#cb16-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2018</span>)<span class="sc">+</span></span>
<span id="cb16-487"><a href="#cb16-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2021</span>)<span class="sc">+</span></span>
<span id="cb16-488"><a href="#cb16-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb16-489"><a href="#cb16-489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-490"><a href="#cb16-490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"State ROT - 2.2% &amp; "</span>,</span>
<span id="cb16-491"><a href="#cb16-491" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Large increases due to Leveling the Playing Field Act &amp; Online shopping during pandemic??"</span>)</span>
<span id="cb16-492"><a href="#cb16-492" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-493"><a href="#cb16-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-494"><a href="#cb16-494" aria-hidden="true" tabindex="-1"></a>As of Feb. 6 2023, Source 481 Retailers Occupation Tax has collected \$9.3 billion already. FY22 had \$14.7 million. Around half goes to the General Revenue Fund.</span>
<span id="cb16-495"><a href="#cb16-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-498"><a href="#cb16-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-499"><a href="#cb16-499" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-500"><a href="#cb16-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> </span>
<span id="cb16-501"><a href="#cb16-501" aria-hidden="true" tabindex="-1"></a>          rev_type <span class="sc">==</span> <span class="st">"02"</span> <span class="sc">|</span> </span>
<span id="cb16-502"><a href="#cb16-502" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-503"><a href="#cb16-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(source_name_AWM, <span class="st">"PPRT"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">str_detect</span>(fund, <span class="st">"REFUND"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-504"><a href="#cb16-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-505"><a href="#cb16-505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy, source, source_name_AWM) <span class="sc">%&gt;%</span> </span>
<span id="cb16-506"><a href="#cb16-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-507"><a href="#cb16-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># aes(x=fy, y=receipts/1000, group = source))+</span></span>
<span id="cb16-508"><a href="#cb16-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_recessions</span>(<span class="at">text =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb16-509"><a href="#cb16-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>, <span class="at">color =</span> source_name_AWM)) <span class="sc">+</span> </span>
<span id="cb16-510"><a href="#cb16-510" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_text(data = annotation, aes(x=x, y=y, label=label)) +</span></span>
<span id="cb16-511"><a href="#cb16-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-512"><a href="#cb16-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-513"><a href="#cb16-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-514"><a href="#cb16-514" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"dotted"</span>, <span class="st">"dashed"</span>, <span class="st">"solid"</span>)) <span class="sc">+</span></span>
<span id="cb16-515"><a href="#cb16-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb16-516"><a href="#cb16-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"What the State Actually Gets to Keep"</span>, </span>
<span id="cb16-517"><a href="#cb16-517" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Tax Revenue collected by the State minus (refund fund $ &amp; Local Transfers)"</span>,</span>
<span id="cb16-518"><a href="#cb16-518" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-519"><a href="#cb16-519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb16-520"><a href="#cb16-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-523"><a href="#cb16-523" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb16-524"><a href="#cb16-524" aria-hidden="true" tabindex="-1"></a>rev_temp  <span class="sc">%&gt;%</span> </span>
<span id="cb16-525"><a href="#cb16-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rev_type <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">|</span> </span>
<span id="cb16-526"><a href="#cb16-526" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"02"</span> <span class="sc">|</span> </span>
<span id="cb16-527"><a href="#cb16-527" aria-hidden="true" tabindex="-1"></a>           rev_type <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-528"><a href="#cb16-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(source_name_AWM, <span class="st">"PPRT"</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">str_detect</span>(fund, <span class="st">"REFUND"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-529"><a href="#cb16-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-530"><a href="#cb16-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fy,</span>
<span id="cb16-531"><a href="#cb16-531" aria-hidden="true" tabindex="-1"></a>           rev_type</span>
<span id="cb16-532"><a href="#cb16-532" aria-hidden="true" tabindex="-1"></a>           <span class="co"># source, source_name_AWM</span></span>
<span id="cb16-533"><a href="#cb16-533" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">%&gt;%</span> </span>
<span id="cb16-534"><a href="#cb16-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">receipts =</span> <span class="fu">sum</span>(receipts)) <span class="sc">%&gt;%</span></span>
<span id="cb16-535"><a href="#cb16-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># aes(x=fy, y=receipts/1000, group = source))+</span></span>
<span id="cb16-536"><a href="#cb16-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>fy, <span class="at">y=</span>receipts<span class="sc">/</span><span class="dv">1000000000</span>,</span>
<span id="cb16-537"><a href="#cb16-537" aria-hidden="true" tabindex="-1"></a>                <span class="at">group =</span> rev_type, <span class="at">color=</span>rev_type</span>
<span id="cb16-538"><a href="#cb16-538" aria-hidden="true" tabindex="-1"></a>                ) )<span class="sc">+</span> </span>
<span id="cb16-539"><a href="#cb16-539" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-540"><a href="#cb16-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1998</span>, current_year<span class="fl">+.5</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1998</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, current_year)) <span class="sc">+</span></span>
<span id="cb16-541"><a href="#cb16-541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb16-542"><a href="#cb16-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-543"><a href="#cb16-543" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb16-544"><a href="#cb16-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"What the State Actually Gets to Keep"</span>, </span>
<span id="cb16-545"><a href="#cb16-545" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Tax Revenue collected by the State minus (refund fund $ &amp; Local Transfers)"</span>,</span>
<span id="cb16-546"><a href="#cb16-546" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Billions of Nominal Dollars"</span>) </span>
<span id="cb16-547"><a href="#cb16-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>